{"ast":null,"code":"/**\n * @module ol/renderer/vector\n */\nimport BuilderType from '../render/canvas/BuilderType.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ImageState from '../ImageState.js';\nimport { getUid } from '../util.js';\n/**\n * Feature callback. The callback will be called with three arguments. The first\n * argument is one {@link module:ol/Feature~Feature feature} or {@link module:ol/render/Feature~RenderFeature render feature}\n * at the pixel, the second is the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n * unmanaged layers. The third is the {@link module:ol/geom/SimpleGeometry~SimpleGeometry} of the feature. For features\n * with a GeometryCollection geometry, it will be the first detected geometry from the collection.\n * @template T\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, import(\"../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\n\nvar SIMPLIFY_TOLERANCE = 0.5;\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\n\nvar GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\n\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\n\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  var tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\n\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\nfunction renderCircleGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (fillStyle || strokeStyle) {\n    var circleReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n * @return {boolean} `true` if style is loading.\n */\n\n\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, opt_transform, opt_declutterBuilderGroup) {\n  var loading = false;\n  var imageStyle = style.getImage();\n\n  if (imageStyle) {\n    var imageState = imageStyle.getImageState();\n\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener);\n      loading = true;\n    }\n  }\n\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup);\n  return loading;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup) {\n  var geometry = style.getGeometryFunction()(feature);\n\n  if (!geometry) {\n    return;\n  }\n\n  var simplifiedGeometry = geometry.simplifyTransformed(squaredTolerance, opt_transform);\n  var renderer = style.getRenderer();\n\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    var geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature, opt_declutterBuilderGroup);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\n\n\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    var geometries =\n    /** @type {import(\"../geom/GeometryCollection.js\").default} */\n    geometry.getGeometries();\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n\n    return;\n  }\n\n  var replay = replayGroup.getBuilder(style.getZIndex(), BuilderType.DEFAULT);\n  replay.drawCustom(\n  /** @type {import(\"../geom/SimpleGeometry.js\").default} */\n  geometry, feature, style.getRenderer(), style.getHitDetectionRenderer());\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var geometries = geometry.getGeometriesArray();\n  var i, ii;\n\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    var geometryRenderer = GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature, opt_declutterBuilderGroup);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle) {\n    var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle) {\n    var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle || fillStyle) {\n    var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var imageStyle = style.getImage();\n  var textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n\n  var declutterImageWithText;\n\n  if (opt_declutterBuilderGroup) {\n    builderGroup = opt_declutterBuilderGroup;\n    declutterImageWithText = imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n  }\n\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n\n    var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawPoint(geometry, feature);\n  }\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var imageStyle = style.getImage();\n  var textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n\n  var declutterImageWithText;\n\n  if (opt_declutterBuilderGroup) {\n    builderGroup = opt_declutterBuilderGroup;\n    declutterImageWithText = imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n  }\n\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n\n    var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (fillStyle || strokeStyle) {\n    var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}","map":{"version":3,"mappings":"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","names":["BuilderType","GeometryType","ImageState","getUid","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","renderPointGeometry","renderLineStringGeometry","renderPolygonGeometry","renderMultiPointGeometry","renderMultiLineStringGeometry","renderMultiPolygonGeometry","renderGeometryCollectionGeometry","renderCircleGeometry","defaultOrder","feature1","feature2","parseInt","getSquaredTolerance","resolution","pixelRatio","tolerance","getTolerance","builderGroup","geometry","style","feature","opt_declutterBuilderGroup","fillStyle","getFill","strokeStyle","getStroke","circleReplay","getBuilder","getZIndex","CIRCLE","setFillStrokeStyle","drawCircle","textStyle","getText","textReplay","TEXT","setTextStyle","drawText","renderFeature","replayGroup","squaredTolerance","listener","opt_transform","loading","imageStyle","getImage","imageState","getImageState","LOADED","ERROR","unlistenImageChange","IDLE","load","listenImageChange","renderFeatureInternal","getGeometryFunction","simplifiedGeometry","simplifyTransformed","renderer","getRenderer","renderGeometry","geometryRenderer","getType","GEOMETRY_COLLECTION","geometries","getGeometries","i","ii","length","replay","DEFAULT","drawCustom","getHitDetectionRenderer","getGeometriesArray","lineStringReplay","LINE_STRING","drawLineString","drawMultiLineString","polygonReplay","POLYGON","drawMultiPolygon","declutterImageWithText","undefined","imageReplay","IMAGE","setImageStyle","drawPoint","drawMultiPoint","drawPolygon"],"sourceRoot":"","sources":["../src/renderer/vector.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}