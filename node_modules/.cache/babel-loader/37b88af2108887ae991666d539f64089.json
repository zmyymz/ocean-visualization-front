{"ast":null,"code":"import { BaseSource } from './basesource.js';\n\nclass FileReaderSource extends BaseSource {\n  constructor(file) {\n    super();\n    this.file = file;\n  }\n\n  async fetchSlice(slice, signal) {\n    return new Promise((resolve, reject) => {\n      const blob = this.file.slice(slice.offset, slice.offset + slice.length);\n      const reader = new FileReader();\n\n      reader.onload = event => resolve(event.target.result);\n\n      reader.onerror = reject;\n      reader.onabort = reject;\n      reader.readAsArrayBuffer(blob);\n\n      if (signal) {\n        signal.addEventListener('abort', () => reader.abort());\n      }\n    });\n  }\n\n}\n/**\n * Create a new source from a given file/blob.\n * @param {Blob} file The file or blob to read from.\n * @returns The constructed source\n */\n\n\nexport function makeFileReaderSource(file) {\n  return new FileReaderSource(file);\n}","map":{"version":3,"sources":["D:/Java/JavaEE/IdeaProjects/ocean-vis/node_modules/geotiff/dist-module/source/filereader.js"],"names":["BaseSource","FileReaderSource","constructor","file","fetchSlice","slice","signal","Promise","resolve","reject","blob","offset","length","reader","FileReader","onload","event","target","result","onerror","onabort","readAsArrayBuffer","addEventListener","abort","makeFileReaderSource"],"mappings":"AAAA,SAASA,UAAT,QAA2B,iBAA3B;;AAEA,MAAMC,gBAAN,SAA+BD,UAA/B,CAA0C;AACxCE,EAAAA,WAAW,CAACC,IAAD,EAAO;AAChB;AACA,SAAKA,IAAL,GAAYA,IAAZ;AACD;;AAEe,QAAVC,UAAU,CAACC,KAAD,EAAQC,MAAR,EAAgB;AAC9B,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,YAAMC,IAAI,GAAG,KAAKP,IAAL,CAAUE,KAAV,CAAgBA,KAAK,CAACM,MAAtB,EAA8BN,KAAK,CAACM,MAAN,GAAeN,KAAK,CAACO,MAAnD,CAAb;AACA,YAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,MAAAA,MAAM,CAACE,MAAP,GAAiBC,KAAD,IAAWR,OAAO,CAACQ,KAAK,CAACC,MAAN,CAAaC,MAAd,CAAlC;;AACAL,MAAAA,MAAM,CAACM,OAAP,GAAiBV,MAAjB;AACAI,MAAAA,MAAM,CAACO,OAAP,GAAiBX,MAAjB;AACAI,MAAAA,MAAM,CAACQ,iBAAP,CAAyBX,IAAzB;;AAEA,UAAIJ,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACgB,gBAAP,CAAwB,OAAxB,EAAiC,MAAMT,MAAM,CAACU,KAAP,EAAvC;AACD;AACF,KAXM,CAAP;AAYD;;AAnBuC;AAsB1C;AACA;AACA;AACA;AACA;;;AACA,OAAO,SAASC,oBAAT,CAA8BrB,IAA9B,EAAoC;AACzC,SAAO,IAAIF,gBAAJ,CAAqBE,IAArB,CAAP;AACD","sourcesContent":["import { BaseSource } from './basesource.js';\n\nclass FileReaderSource extends BaseSource {\n  constructor(file) {\n    super();\n    this.file = file;\n  }\n\n  async fetchSlice(slice, signal) {\n    return new Promise((resolve, reject) => {\n      const blob = this.file.slice(slice.offset, slice.offset + slice.length);\n      const reader = new FileReader();\n      reader.onload = (event) => resolve(event.target.result);\n      reader.onerror = reject;\n      reader.onabort = reject;\n      reader.readAsArrayBuffer(blob);\n\n      if (signal) {\n        signal.addEventListener('abort', () => reader.abort());\n      }\n    });\n  }\n}\n\n/**\n * Create a new source from a given file/blob.\n * @param {Blob} file The file or blob to read from.\n * @returns The constructed source\n */\nexport function makeFileReaderSource(file) {\n  return new FileReaderSource(file);\n}\n"]},"metadata":{},"sourceType":"module"}