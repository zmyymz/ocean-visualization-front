{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/format/WFS\n */\n\n\nimport GML2 from './GML2.js';\nimport GML3 from './GML3.js';\nimport GML32 from './GML32.js';\nimport GMLBase, { GMLNS } from './GMLBase.js';\nimport XMLFeature from './XMLFeature.js';\nimport { XML_SCHEMA_INSTANCE_URI, createElementNS, isDocument, makeArrayPusher, makeChildAppender, makeObjectPropertySetter, makeSimpleNodeFactory, parse, parseNode, pushParseAndPop, pushSerializeAndPop } from '../xml.js';\nimport { and as andFilterFn, bbox as bboxFilterFn } from './filter.js';\nimport { assert } from '../asserts.js';\nimport { assign } from '../obj.js';\nimport { get as getProjection } from '../proj.js';\nimport { readNonNegativeIntegerString, readPositiveInteger, writeStringTextNode } from './xsd.js';\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n\nvar FEATURE_COLLECTION_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'boundedBy': makeObjectPropertySetter(GMLBase.prototype.readGeometryElement, 'bounds')\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'member': makeArrayPusher(GMLBase.prototype.readFeaturesInternal)\n  }\n};\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n\nvar TRANSACTION_SUMMARY_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'totalInserted': makeObjectPropertySetter(readPositiveInteger),\n    'totalUpdated': makeObjectPropertySetter(readPositiveInteger),\n    'totalDeleted': makeObjectPropertySetter(readPositiveInteger)\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'totalInserted': makeObjectPropertySetter(readPositiveInteger),\n    'totalUpdated': makeObjectPropertySetter(readPositiveInteger),\n    'totalDeleted': makeObjectPropertySetter(readPositiveInteger)\n  }\n};\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n\nvar TRANSACTION_RESPONSE_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'TransactionSummary': makeObjectPropertySetter(readTransactionSummary, 'transactionSummary'),\n    'InsertResults': makeObjectPropertySetter(readInsertResults, 'insertIds')\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'TransactionSummary': makeObjectPropertySetter(readTransactionSummary, 'transactionSummary'),\n    'InsertResults': makeObjectPropertySetter(readInsertResults, 'insertIds')\n  }\n};\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n\nvar QUERY_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'PropertyName': makeChildAppender(writeStringTextNode)\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'PropertyName': makeChildAppender(writeStringTextNode)\n  }\n};\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n\nvar TRANSACTION_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'Insert': makeChildAppender(writeFeature),\n    'Update': makeChildAppender(writeUpdate),\n    'Delete': makeChildAppender(writeDelete),\n    'Property': makeChildAppender(writeProperty),\n    'Native': makeChildAppender(writeNative)\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Insert': makeChildAppender(writeFeature),\n    'Update': makeChildAppender(writeUpdate),\n    'Delete': makeChildAppender(writeDelete),\n    'Property': makeChildAppender(writeProperty),\n    'Native': makeChildAppender(writeNative)\n  }\n};\n/**\n * @typedef {Object} Options\n * @property {Object<string, string>|string} [featureNS] The namespace URI used for features.\n * @property {Array<string>|string} [featureType] The feature type to parse. Only used for read operations.\n * @property {GMLBase} [gmlFormat] The GML format to use to parse the response.\n * Default is `ol/format/GML2` for WFS 1.0.0, `ol/format/GML3` for WFS 1.1.0 and `ol/format/GML32` for WFS 2.0.0.\n * @property {string} [schemaLocation] Optional schemaLocation to use for serialization, this will override the default.\n * @property {string} [version='1.1.0'] WFS version to use. Can be either `1.0.0`, `1.1.0` or `2.0.0`.\n */\n\n/**\n * @typedef {Object} WriteGetFeatureOptions\n * @property {string} featureNS The namespace URI used for features.\n * @property {string} featurePrefix The prefix for the feature namespace.\n * @property {Array<string|FeatureType>} featureTypes The feature type names or FeatureType objects to\n * define a unique bbox filter per feature type name (in this case, options `bbox` and `geometryName` are\n * ignored.).\n * @property {string} [srsName] SRS name. No srsName attribute will be set on\n * geometries when this is not provided.\n * @property {string} [handle] Handle.\n * @property {string} [outputFormat] Output format.\n * @property {number} [maxFeatures] Maximum number of features to fetch.\n * @property {string} [geometryName] Geometry name to use in a BBOX filter.\n * @property {Array<string>} [propertyNames] Optional list of property names to serialize.\n * @property {string} [viewParams] viewParams GeoServer vendor parameter.\n * @property {number} [startIndex] Start index to use for WFS paging. This is a\n * WFS 2.0 feature backported to WFS 1.1.0 by some Web Feature Services.\n * @property {number} [count] Number of features to retrieve when paging. This is a\n * WFS 2.0 feature backported to WFS 1.1.0 by some Web Feature Services. Please note that some\n * Web Feature Services have repurposed `maxfeatures` instead.\n * @property {import(\"../extent.js\").Extent} [bbox] Extent to use for the BBOX filter. The `geometryName`\n * option must be set.\n * @property {import(\"./filter/Filter.js\").default} [filter] Filter condition. See\n * {@link module:ol/format/filter} for more information.\n * @property {string} [resultType] Indicates what response should be returned,\n * e.g. `hits` only includes the `numberOfFeatures` attribute in the response and no features.\n */\n\n/**\n * @typedef {Object} FeatureType\n * @property {!string} name The feature type name.\n * @property {!import(\"../extent.js\").Extent} bbox Extent to use for the BBOX filter.\n * @property {!string} geometryName Geometry name to use in the BBOX filter.\n */\n\n/**\n * @typedef {Object} WriteTransactionOptions\n * @property {string} featureNS The namespace URI used for features.\n * @property {string} featurePrefix The prefix for the feature namespace.\n * @property {string} featureType The feature type name.\n * @property {string} [srsName] SRS name. No srsName attribute will be set on\n * geometries when this is not provided.\n * @property {string} [handle] Handle.\n * @property {boolean} [hasZ] Must be set to true if the transaction is for\n * a 3D layer. This will allow the Z coordinate to be included in the transaction.\n * @property {Array<Object>} nativeElements Native elements. Currently not supported.\n * @property {import(\"./GMLBase.js\").Options} [gmlOptions] GML options for the WFS transaction writer.\n * @property {string} [version='1.1.0'] WFS version to use for the transaction. Can be either `1.0.0`, `1.1.0` or `2.0.0`.\n */\n\n/**\n * Number of features; bounds/extent.\n * @typedef {Object} FeatureCollectionMetadata\n * @property {number} numberOfFeatures NumberOfFeatures.\n * @property {import(\"../extent.js\").Extent} bounds Bounds.\n */\n\n/**\n * Total deleted; total inserted; total updated; array of insert ids.\n * @typedef {Object} TransactionResponse\n * @property {number} totalDeleted TotalDeleted.\n * @property {number} totalInserted TotalInserted.\n * @property {number} totalUpdated TotalUpdated.\n * @property {Array<string>} insertIds InsertIds.\n */\n\n/**\n * @type {string}\n */\n\nvar FEATURE_PREFIX = 'feature';\n/**\n * @type {string}\n */\n\nvar XMLNS = 'http://www.w3.org/2000/xmlns/';\n/**\n * @type {Object<string, string>}\n */\n\nvar OGCNS = {\n  '2.0.0': 'http://www.opengis.net/ogc/1.1',\n  '1.1.0': 'http://www.opengis.net/ogc',\n  '1.0.0': 'http://www.opengis.net/ogc'\n};\n/**\n * @type {Object<string, string>}\n */\n\nvar WFSNS = {\n  '2.0.0': 'http://www.opengis.net/wfs/2.0',\n  '1.1.0': 'http://www.opengis.net/wfs',\n  '1.0.0': 'http://www.opengis.net/wfs'\n};\n/**\n * @type {Object<string, string>}\n */\n\nvar FESNS = {\n  '2.0.0': 'http://www.opengis.net/fes/2.0',\n  '1.1.0': 'http://www.opengis.net/fes',\n  '1.0.0': 'http://www.opengis.net/fes'\n};\n/**\n * @type {Object<string, string>}\n */\n\nvar SCHEMA_LOCATIONS = {\n  '2.0.0': 'http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd',\n  '1.1.0': 'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd',\n  '1.0.0': 'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd'\n};\n/**\n * @type {Object<string, object>}\n */\n\nvar GML_FORMATS = {\n  '2.0.0': GML32,\n  '1.1.0': GML3,\n  '1.0.0': GML2\n};\n/**\n * @const\n * @type {string}\n */\n\nvar DEFAULT_VERSION = '1.1.0';\n/**\n * @classdesc\n * Feature format for reading and writing data in the WFS format.\n * By default, supports WFS version 1.1.0. You can pass a GML format\n * as option to override the default.\n * Also see {@link module:ol/format/GMLBase~GMLBase} which is used by this format.\n *\n * @api\n */\n\nvar WFS =\n/** @class */\nfunction (_super) {\n  __extends(WFS, _super);\n  /**\n   * @param {Options} [opt_options] Optional configuration object.\n   */\n\n\n  function WFS(opt_options) {\n    var _this = _super.call(this) || this;\n\n    var options = opt_options ? opt_options : {};\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.version_ = options.version ? options.version : DEFAULT_VERSION;\n    /**\n     * @private\n     * @type {Array<string>|string|undefined}\n     */\n\n    _this.featureType_ = options.featureType;\n    /**\n     * @private\n     * @type {Object<string, string>|string|undefined}\n     */\n\n    _this.featureNS_ = options.featureNS;\n    /**\n     * @private\n     * @type {GMLBase}\n     */\n\n    _this.gmlFormat_ = options.gmlFormat ? options.gmlFormat : new GML_FORMATS[_this.version_]();\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.schemaLocation_ = options.schemaLocation ? options.schemaLocation : SCHEMA_LOCATIONS[_this.version_];\n    return _this;\n  }\n  /**\n   * @return {Array<string>|string|undefined} featureType\n   */\n\n\n  WFS.prototype.getFeatureType = function () {\n    return this.featureType_;\n  };\n  /**\n   * @param {Array<string>|string|undefined} featureType Feature type(s) to parse.\n   */\n\n\n  WFS.prototype.setFeatureType = function (featureType) {\n    this.featureType_ = featureType;\n  };\n  /**\n   * @protected\n   * @param {Element} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n\n\n  WFS.prototype.readFeaturesFromNode = function (node, opt_options) {\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    var context = {\n      node: node\n    };\n    assign(context, {\n      'featureType': this.featureType_,\n      'featureNS': this.featureNS_\n    });\n    assign(context, this.getReadOptions(node, opt_options ? opt_options : {}));\n    var objectStack = [context];\n    var featuresNS;\n\n    if (this.version_ === '2.0.0') {\n      featuresNS = FEATURE_COLLECTION_PARSERS;\n    } else {\n      featuresNS = this.gmlFormat_.FEATURE_COLLECTION_PARSERS;\n    }\n\n    var features = pushParseAndPop([], featuresNS, node, objectStack, this.gmlFormat_);\n\n    if (!features) {\n      features = [];\n    }\n\n    return features;\n  };\n  /**\n   * Read transaction response of the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {TransactionResponse|undefined} Transaction response.\n   * @api\n   */\n\n\n  WFS.prototype.readTransactionResponse = function (source) {\n    if (!source) {\n      return undefined;\n    } else if (typeof source === 'string') {\n      var doc = parse(source);\n      return this.readTransactionResponseFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readTransactionResponseFromDocument(\n      /** @type {Document} */\n      source);\n    } else {\n      return this.readTransactionResponseFromNode(\n      /** @type {Element} */\n      source);\n    }\n  };\n  /**\n   * Read feature collection metadata of the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   * @api\n   */\n\n\n  WFS.prototype.readFeatureCollectionMetadata = function (source) {\n    if (!source) {\n      return undefined;\n    } else if (typeof source === 'string') {\n      var doc = parse(source);\n      return this.readFeatureCollectionMetadataFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readFeatureCollectionMetadataFromDocument(\n      /** @type {Document} */\n      source);\n    } else {\n      return this.readFeatureCollectionMetadataFromNode(\n      /** @type {Element} */\n      source);\n    }\n  };\n  /**\n   * @param {Document} doc Document.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   */\n\n\n  WFS.prototype.readFeatureCollectionMetadataFromDocument = function (doc) {\n    for (var n =\n    /** @type {Node} */\n    doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFeatureCollectionMetadataFromNode(\n        /** @type {Element} */\n        n);\n      }\n    }\n\n    return undefined;\n  };\n  /**\n   * @param {Element} node Node.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   */\n\n\n  WFS.prototype.readFeatureCollectionMetadataFromNode = function (node) {\n    var result = {};\n    var value = readNonNegativeIntegerString(node.getAttribute('numberOfFeatures'));\n    result['numberOfFeatures'] = value;\n    return pushParseAndPop(\n    /** @type {FeatureCollectionMetadata} */\n    result, FEATURE_COLLECTION_PARSERS, node, [], this.gmlFormat_);\n  };\n  /**\n   * @param {Document} doc Document.\n   * @return {TransactionResponse|undefined} Transaction response.\n   */\n\n\n  WFS.prototype.readTransactionResponseFromDocument = function (doc) {\n    for (var n =\n    /** @type {Node} */\n    doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readTransactionResponseFromNode(\n        /** @type {Element} */\n        n);\n      }\n    }\n\n    return undefined;\n  };\n  /**\n   * @param {Element} node Node.\n   * @return {TransactionResponse|undefined} Transaction response.\n   */\n\n\n  WFS.prototype.readTransactionResponseFromNode = function (node) {\n    return pushParseAndPop(\n    /** @type {TransactionResponse} */\n    {}, TRANSACTION_RESPONSE_PARSERS, node, []);\n  };\n  /**\n   * Encode format as WFS `GetFeature` and return the Node.\n   *\n   * @param {WriteGetFeatureOptions} options Options.\n   * @return {Node} Result.\n   * @api\n   */\n\n\n  WFS.prototype.writeGetFeature = function (options) {\n    var _this = this;\n\n    var node = createElementNS(WFSNS[this.version_], 'GetFeature');\n    node.setAttribute('service', 'WFS');\n    node.setAttribute('version', this.version_);\n\n    if (options.handle) {\n      node.setAttribute('handle', options.handle);\n    }\n\n    if (options.outputFormat) {\n      node.setAttribute('outputFormat', options.outputFormat);\n    }\n\n    if (options.maxFeatures !== undefined) {\n      node.setAttribute('maxFeatures', String(options.maxFeatures));\n    }\n\n    if (options.resultType) {\n      node.setAttribute('resultType', options.resultType);\n    }\n\n    if (options.startIndex !== undefined) {\n      node.setAttribute('startIndex', String(options.startIndex));\n    }\n\n    if (options.count !== undefined) {\n      node.setAttribute('count', String(options.count));\n    }\n\n    if (options.viewParams !== undefined) {\n      node.setAttribute('viewParams', options.viewParams);\n    }\n\n    node.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', this.schemaLocation_);\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n\n    var context = {\n      node: node\n    };\n    assign(context, {\n      'version': this.version_,\n      'srsName': options.srsName,\n      'featureNS': options.featureNS ? options.featureNS : this.featureNS_,\n      'featurePrefix': options.featurePrefix,\n      'propertyNames': options.propertyNames ? options.propertyNames : []\n    });\n    assert(Array.isArray(options.featureTypes), 11); // `options.featureTypes` must be an Array\n\n    if (typeof options.featureTypes[0] === 'string') {\n      var filter = options.filter;\n\n      if (options.bbox) {\n        assert(options.geometryName, 12); // `options.geometryName` must also be provided when `options.bbox` is set\n\n        filter = this.combineBboxAndFilter(options.geometryName, options.bbox, options.srsName, filter);\n      }\n\n      assign(context, {\n        'geometryName': options.geometryName,\n        'filter': filter\n      });\n      writeGetFeature(node,\n      /** @type {!Array<string>} */\n      options.featureTypes, [context]);\n    } else {\n      // Write one query node per element in featuresType.\n      options.featureTypes.forEach(function (\n      /** @type {FeatureType} */\n      featureType) {\n        var completeFilter = _this.combineBboxAndFilter(featureType.geometryName, featureType.bbox, options.srsName, options.filter);\n\n        assign(context, {\n          'geometryName': featureType.geometryName,\n          'filter': completeFilter\n        });\n        writeGetFeature(node, [featureType.name], [context]);\n      });\n    }\n\n    return node;\n  };\n  /**\n   * Create a bbox filter and combine it with another optional filter.\n   *\n   * @param {!string} geometryName Geometry name to use.\n   * @param {!import(\"../extent.js\").Extent} extent Extent.\n   * @param {string} [opt_srsName] SRS name. No srsName attribute will be\n   *    set on geometries when this is not provided.\n   * @param {import(\"./filter/Filter.js\").default} [opt_filter] Filter condition.\n   * @return {import(\"./filter/Filter.js\").default} The filter.\n   */\n\n\n  WFS.prototype.combineBboxAndFilter = function (geometryName, extent, opt_srsName, opt_filter) {\n    var bboxFilter = bboxFilterFn(geometryName, extent, opt_srsName);\n\n    if (opt_filter) {\n      // if bbox and filter are both set, combine the two into a single filter\n      return andFilterFn(opt_filter, bboxFilter);\n    }\n\n    return bboxFilter;\n  };\n  /**\n   * Encode format as WFS `Transaction` and return the Node.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} inserts The features to insert.\n   * @param {Array<import(\"../Feature.js\").default>} updates The features to update.\n   * @param {Array<import(\"../Feature.js\").default>} deletes The features to delete.\n   * @param {WriteTransactionOptions} options Write options.\n   * @return {Node} Result.\n   * @api\n   */\n\n\n  WFS.prototype.writeTransaction = function (inserts, updates, deletes, options) {\n    var objectStack = [];\n    var version = options.version ? options.version : this.version_;\n    var node = createElementNS(WFSNS[version], 'Transaction');\n    node.setAttribute('service', 'WFS');\n    node.setAttribute('version', version);\n    var baseObj;\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n\n    if (options) {\n      baseObj = options.gmlOptions ? options.gmlOptions : {};\n\n      if (options.handle) {\n        node.setAttribute('handle', options.handle);\n      }\n    }\n\n    node.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATIONS[version]);\n    var request = createTransactionRequest(node, baseObj, version, options);\n\n    if (inserts) {\n      serializeTransactionRequest('Insert', inserts, objectStack, request);\n    }\n\n    if (updates) {\n      serializeTransactionRequest('Update', updates, objectStack, request);\n    }\n\n    if (deletes) {\n      serializeTransactionRequest('Delete', deletes, objectStack, request);\n    }\n\n    if (options.nativeElements) {\n      serializeTransactionRequest('Native', options.nativeElements, objectStack, request);\n    }\n\n    return node;\n  };\n  /**\n   * @param {Document} doc Document.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n\n\n  WFS.prototype.readProjectionFromDocument = function (doc) {\n    for (var n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readProjectionFromNode(\n        /** @type {Element} */\n        n);\n      }\n    }\n\n    return null;\n  };\n  /**\n   * @param {Element} node Node.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n\n\n  WFS.prototype.readProjectionFromNode = function (node) {\n    if (node.firstElementChild && node.firstElementChild.firstElementChild) {\n      node = node.firstElementChild.firstElementChild;\n\n      for (var n = node.firstElementChild; n; n = n.nextElementSibling) {\n        if (!(n.childNodes.length === 0 || n.childNodes.length === 1 && n.firstChild.nodeType === 3)) {\n          var objectStack = [{}];\n          this.gmlFormat_.readGeometryElement(n, objectStack);\n          return getProjection(objectStack.pop().srsName);\n        }\n      }\n    }\n\n    return null;\n  };\n\n  return WFS;\n}(XMLFeature);\n/**\n * @param {Element} node Node.\n * @param {*} baseObj Base object.\n * @param {string} version Version.\n * @param {WriteTransactionOptions} options Options.\n * @return {Object} Request object.\n */\n\n\nfunction createTransactionRequest(node, baseObj, version, options) {\n  var featurePrefix = options.featurePrefix ? options.featurePrefix : FEATURE_PREFIX;\n  var gmlVersion;\n\n  if (version === '1.0.0') {\n    gmlVersion = 2;\n  } else if (version === '1.1.0') {\n    gmlVersion = 3;\n  } else if (version === '2.0.0') {\n    gmlVersion = 3.2;\n  }\n\n  var obj = assign({\n    node: node\n  }, {\n    version: version,\n    'featureNS': options.featureNS,\n    'featureType': options.featureType,\n    'featurePrefix': featurePrefix,\n    'gmlVersion': gmlVersion,\n    'hasZ': options.hasZ,\n    'srsName': options.srsName\n  }, baseObj);\n  return obj;\n}\n/**\n * @param {string} type Request type.\n * @param {Array<import(\"../Feature.js\").default>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @param {Element} request Transaction Request.\n */\n\n\nfunction serializeTransactionRequest(type, features, objectStack, request) {\n  pushSerializeAndPop(request, TRANSACTION_SERIALIZERS, makeSimpleNodeFactory(type), features, objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Transaction Summary.\n */\n\n\nfunction readTransactionSummary(node, objectStack) {\n  return pushParseAndPop({}, TRANSACTION_SUMMARY_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n\n\nvar OGC_FID_PARSERS = {\n  'http://www.opengis.net/ogc': {\n    'FeatureId': makeArrayPusher(function (node, objectStack) {\n      return node.getAttribute('fid');\n    })\n  },\n  'http://www.opengis.net/ogc/1.1': {\n    'FeatureId': makeArrayPusher(function (node, objectStack) {\n      return node.getAttribute('fid');\n    })\n  }\n};\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\n\nfunction fidParser(node, objectStack) {\n  parseNode(OGC_FID_PARSERS, node, objectStack);\n}\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n\n\nvar INSERT_RESULTS_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'Feature': fidParser\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Feature': fidParser\n  }\n};\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<string>|undefined} Insert results.\n */\n\nfunction readInsertResults(node, objectStack) {\n  return pushParseAndPop([], INSERT_RESULTS_PARSERS, node, objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeFeature(node, feature, objectStack) {\n  var context = objectStack[objectStack.length - 1];\n  var featureType = context['featureType'];\n  var featureNS = context['featureNS'];\n  var gmlVersion = context['gmlVersion'];\n  var child = createElementNS(featureNS, featureType);\n  node.appendChild(child);\n\n  if (gmlVersion === 2) {\n    GML2.prototype.writeFeatureElement(child, feature, objectStack);\n  } else if (gmlVersion === 3) {\n    GML3.prototype.writeFeatureElement(child, feature, objectStack);\n  } else {\n    GML32.prototype.writeFeatureElement(child, feature, objectStack);\n  }\n}\n/**\n * @param {Node} node Node.\n * @param {number|string} fid Feature identifier.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeOgcFidFilter(node, fid, objectStack) {\n  var context = objectStack[objectStack.length - 1];\n  var version = context['version'];\n  var ns = OGCNS[version];\n  var filter = createElementNS(ns, 'Filter');\n  var child = createElementNS(ns, 'FeatureId');\n  filter.appendChild(child);\n  child.setAttribute('fid',\n  /** @type {string} */\n  fid);\n  node.appendChild(filter);\n}\n/**\n * @param {string|undefined} featurePrefix The prefix of the feature.\n * @param {string} featureType The type of the feature.\n * @return {string} The value of the typeName property.\n */\n\n\nfunction getTypeName(featurePrefix, featureType) {\n  featurePrefix = featurePrefix ? featurePrefix : FEATURE_PREFIX;\n  var prefix = featurePrefix + ':'; // The featureType already contains the prefix.\n\n  if (featureType.indexOf(prefix) === 0) {\n    return featureType;\n  } else {\n    return prefix + featureType;\n  }\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeDelete(node, feature, objectStack) {\n  var context = objectStack[objectStack.length - 1];\n  assert(feature.getId() !== undefined, 26); // Features must have an id set\n\n  var featureType = context['featureType'];\n  var featurePrefix = context['featurePrefix'];\n  var featureNS = context['featureNS'];\n  var typeName = getTypeName(featurePrefix, featureType);\n  node.setAttribute('typeName', typeName);\n  node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  var fid = feature.getId();\n\n  if (fid !== undefined) {\n    writeOgcFidFilter(node, fid, objectStack);\n  }\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeUpdate(node, feature, objectStack) {\n  var context = objectStack[objectStack.length - 1];\n  assert(feature.getId() !== undefined, 27); // Features must have an id set\n\n  var version = context['version'];\n  var featureType = context['featureType'];\n  var featurePrefix = context['featurePrefix'];\n  var featureNS = context['featureNS'];\n  var typeName = getTypeName(featurePrefix, featureType);\n  var geometryName = feature.getGeometryName();\n  node.setAttribute('typeName', typeName);\n  node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  var fid = feature.getId();\n\n  if (fid !== undefined) {\n    var keys = feature.getKeys();\n    var values = [];\n\n    for (var i = 0, ii = keys.length; i < ii; i++) {\n      var value = feature.get(keys[i]);\n\n      if (value !== undefined) {\n        var name_1 = keys[i];\n\n        if (value && typeof\n        /** @type {?} */\n        value.getSimplifiedGeometry === 'function') {\n          name_1 = geometryName;\n        }\n\n        values.push({\n          name: name_1,\n          value: value\n        });\n      }\n    }\n\n    pushSerializeAndPop(\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    {\n      version: version,\n      'gmlVersion': context['gmlVersion'],\n      node: node,\n      'hasZ': context['hasZ'],\n      'srsName': context['srsName']\n    }, TRANSACTION_SERIALIZERS, makeSimpleNodeFactory('Property'), values, objectStack);\n    writeOgcFidFilter(node, fid, objectStack);\n  }\n}\n/**\n * @param {Node} node Node.\n * @param {Object} pair Property name and value.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeProperty(node, pair, objectStack) {\n  var context = objectStack[objectStack.length - 1];\n  var version = context['version'];\n  var ns = WFSNS[version];\n  var name = createElementNS(ns, 'Name');\n  var gmlVersion = context['gmlVersion'];\n  node.appendChild(name);\n  writeStringTextNode(name, pair.name);\n\n  if (pair.value !== undefined && pair.value !== null) {\n    var value = createElementNS(ns, 'Value');\n    node.appendChild(value);\n\n    if (pair.value && typeof\n    /** @type {?} */\n    pair.value.getSimplifiedGeometry === 'function') {\n      if (gmlVersion === 2) {\n        GML2.prototype.writeGeometryElement(value, pair.value, objectStack);\n      } else if (gmlVersion === 3) {\n        GML3.prototype.writeGeometryElement(value, pair.value, objectStack);\n      } else {\n        GML32.prototype.writeGeometryElement(value, pair.value, objectStack);\n      }\n    } else {\n      writeStringTextNode(value, pair.value);\n    }\n  }\n}\n/**\n * @param {Element} node Node.\n * @param {{vendorId: string, safeToIgnore: boolean, value: string}} nativeElement The native element.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeNative(node, nativeElement, objectStack) {\n  if (nativeElement.vendorId) {\n    node.setAttribute('vendorId', nativeElement.vendorId);\n  }\n\n  if (nativeElement.safeToIgnore !== undefined) {\n    node.setAttribute('safeToIgnore', String(nativeElement.safeToIgnore));\n  }\n\n  if (nativeElement.value !== undefined) {\n    writeStringTextNode(node, nativeElement.value);\n  }\n}\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n\n\nvar GETFEATURE_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'Query': makeChildAppender(writeQuery)\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Query': makeChildAppender(writeQuery)\n  },\n  'http://www.opengis.net/ogc': {\n    'During': makeChildAppender(writeDuringFilter),\n    'And': makeChildAppender(writeLogicalFilter),\n    'Or': makeChildAppender(writeLogicalFilter),\n    'Not': makeChildAppender(writeNotFilter),\n    'BBOX': makeChildAppender(writeBboxFilter),\n    'Contains': makeChildAppender(writeSpatialFilter),\n    'Intersects': makeChildAppender(writeSpatialFilter),\n    'Within': makeChildAppender(writeSpatialFilter),\n    'DWithin': makeChildAppender(writeDWithinFilter),\n    'PropertyIsEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNotEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNull': makeChildAppender(writeIsNullFilter),\n    'PropertyIsBetween': makeChildAppender(writeIsBetweenFilter),\n    'PropertyIsLike': makeChildAppender(writeIsLikeFilter)\n  },\n  'http://www.opengis.net/fes/2.0': {\n    'During': makeChildAppender(writeDuringFilter),\n    'And': makeChildAppender(writeLogicalFilter),\n    'Or': makeChildAppender(writeLogicalFilter),\n    'Not': makeChildAppender(writeNotFilter),\n    'BBOX': makeChildAppender(writeBboxFilter),\n    'Contains': makeChildAppender(writeSpatialFilter),\n    'Disjoint': makeChildAppender(writeSpatialFilter),\n    'Intersects': makeChildAppender(writeSpatialFilter),\n    'ResourceId': makeChildAppender(writeResourceIdFilter),\n    'Within': makeChildAppender(writeSpatialFilter),\n    'DWithin': makeChildAppender(writeDWithinFilter),\n    'PropertyIsEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNotEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNull': makeChildAppender(writeIsNullFilter),\n    'PropertyIsBetween': makeChildAppender(writeIsBetweenFilter),\n    'PropertyIsLike': makeChildAppender(writeIsLikeFilter)\n  }\n};\n/**\n * @param {Element} node Node.\n * @param {string} featureType Feature type.\n * @param {Array<*>} objectStack Node stack.\n */\n\nfunction writeQuery(node, featureType, objectStack) {\n  var context =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var version = context['version'];\n  var featurePrefix = context['featurePrefix'];\n  var featureNS = context['featureNS'];\n  var propertyNames = context['propertyNames'];\n  var srsName = context['srsName'];\n  var typeName; // If feature prefix is not defined, we must not use the default prefix.\n\n  if (featurePrefix) {\n    typeName = getTypeName(featurePrefix, featureType);\n  } else {\n    typeName = featureType;\n  }\n\n  var typeNameAttr;\n\n  if (version === '2.0.0') {\n    typeNameAttr = 'typeNames';\n  } else {\n    typeNameAttr = 'typeName';\n  }\n\n  node.setAttribute(typeNameAttr, typeName);\n\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n\n  if (featureNS) {\n    node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  }\n\n  var item =\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  assign({}, context);\n  item.node = node;\n  pushSerializeAndPop(item, QUERY_SERIALIZERS, makeSimpleNodeFactory('PropertyName'), propertyNames, objectStack);\n  var filter = context['filter'];\n\n  if (filter) {\n    var child = createElementNS(getFilterNS(version), 'Filter');\n    node.appendChild(child);\n    writeFilterCondition(child, filter, objectStack);\n  }\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/Filter.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeFilterCondition(node, filter, objectStack) {\n  var context =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n\n  var item = {\n    node: node\n  };\n  assign(item, {\n    context: context\n  });\n  pushSerializeAndPop(item, GETFEATURE_SERIALIZERS, makeSimpleNodeFactory(filter.getTagName()), [filter], objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/Bbox.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeBboxFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  parent['srsName'] = filter.srsName;\n  var format = GML_FORMATS[version];\n  writePropertyName(version, node, filter.geometryName);\n  format.prototype.writeGeometryElement(node, filter.extent, objectStack);\n}\n/**\n * @param {Element} node Element.\n * @param {import(\"./filter/ResourceId.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeResourceIdFilter(node, filter, objectStack) {\n  node.setAttribute('rid',\n  /** @type {string} */\n  filter.rid);\n}\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/Spatial.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeSpatialFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  parent['srsName'] = filter.srsName;\n  var format = GML_FORMATS[version];\n  writePropertyName(version, node, filter.geometryName);\n  format.prototype.writeGeometryElement(node, filter.geometry, objectStack);\n}\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/DWithin.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeDWithinFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  writeSpatialFilter(node, filter, objectStack);\n  var distance = createElementNS(getFilterNS(version), 'Distance');\n  writeStringTextNode(distance, filter.distance.toString());\n\n  if (version === '2.0.0') {\n    distance.setAttribute('uom', filter.unit);\n  } else {\n    distance.setAttribute('units', filter.unit);\n  }\n\n  node.appendChild(distance);\n}\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/During.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeDuringFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  writeExpression(FESNS[version], 'ValueReference', node, filter.propertyName);\n  var timePeriod = createElementNS(GMLNS, 'TimePeriod');\n  node.appendChild(timePeriod);\n  var begin = createElementNS(GMLNS, 'begin');\n  timePeriod.appendChild(begin);\n  writeTimeInstant(begin, filter.begin);\n  var end = createElementNS(GMLNS, 'end');\n  timePeriod.appendChild(end);\n  writeTimeInstant(end, filter.end);\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/LogicalNary.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeLogicalFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n\n  var item = {\n    node: node\n  };\n  assign(item, {\n    context: context\n  });\n  var conditions = filter.conditions;\n\n  for (var i = 0, ii = conditions.length; i < ii; ++i) {\n    var condition = conditions[i];\n    pushSerializeAndPop(item, GETFEATURE_SERIALIZERS, makeSimpleNodeFactory(condition.getTagName()), [condition], objectStack);\n  }\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/Not.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeNotFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n\n  var item = {\n    node: node\n  };\n  assign(item, {\n    context: context\n  });\n  var condition = filter.condition;\n  pushSerializeAndPop(item, GETFEATURE_SERIALIZERS, makeSimpleNodeFactory(condition.getTagName()), [condition], objectStack);\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/ComparisonBinary.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeComparisonFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n\n  if (filter.matchCase !== undefined) {\n    node.setAttribute('matchCase', filter.matchCase.toString());\n  }\n\n  writePropertyName(version, node, filter.propertyName);\n  writeLiteral(version, node, '' + filter.expression);\n}\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/IsNull.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeIsNullFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  writePropertyName(version, node, filter.propertyName);\n}\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/IsBetween.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeIsBetweenFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  var ns = getFilterNS(version);\n  writePropertyName(version, node, filter.propertyName);\n  var lowerBoundary = createElementNS(ns, 'LowerBoundary');\n  node.appendChild(lowerBoundary);\n  writeLiteral(version, lowerBoundary, '' + filter.lowerBoundary);\n  var upperBoundary = createElementNS(ns, 'UpperBoundary');\n  node.appendChild(upperBoundary);\n  writeLiteral(version, upperBoundary, '' + filter.upperBoundary);\n}\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/IsLike.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\n\n\nfunction writeIsLikeFilter(node, filter, objectStack) {\n  var parent =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var context = parent['context'];\n  var version = context['version'];\n  node.setAttribute('wildCard', filter.wildCard);\n  node.setAttribute('singleChar', filter.singleChar);\n  node.setAttribute('escapeChar', filter.escapeChar);\n\n  if (filter.matchCase !== undefined) {\n    node.setAttribute('matchCase', filter.matchCase.toString());\n  }\n\n  writePropertyName(version, node, filter.propertyName);\n  writeLiteral(version, node, '' + filter.pattern);\n}\n/**\n * @param {string} ns Namespace.\n * @param {string} tagName Tag name.\n * @param {Node} node Node.\n * @param {string} value Value.\n */\n\n\nfunction writeExpression(ns, tagName, node, value) {\n  var property = createElementNS(ns, tagName);\n  writeStringTextNode(property, value);\n  node.appendChild(property);\n}\n/**\n * @param {string} version Version.\n * @param {Node} node Node.\n * @param {string} value PropertyName value.\n */\n\n\nfunction writeLiteral(version, node, value) {\n  writeExpression(getFilterNS(version), 'Literal', node, value);\n}\n/**\n * @param {string} version Version.\n * @param {Node} node Node.\n * @param {string} value PropertyName value.\n */\n\n\nfunction writePropertyName(version, node, value) {\n  if (version === '2.0.0') {\n    writeExpression(FESNS[version], 'ValueReference', node, value);\n  } else {\n    writeExpression(OGCNS[version], 'PropertyName', node, value);\n  }\n}\n/**\n * @param {Node} node Node.\n * @param {string} time PropertyName value.\n */\n\n\nfunction writeTimeInstant(node, time) {\n  var timeInstant = createElementNS(GMLNS, 'TimeInstant');\n  node.appendChild(timeInstant);\n  var timePosition = createElementNS(GMLNS, 'timePosition');\n  timeInstant.appendChild(timePosition);\n  writeStringTextNode(timePosition, time);\n}\n/**\n * Encode filter as WFS `Filter` and return the Node.\n *\n * @param {import(\"./filter/Filter.js\").default} filter Filter.\n * @param {string} opt_version WFS version. If not provided defaults to '1.1.0'\n * @return {Node} Result.\n * @api\n */\n\n\nexport function writeFilter(filter, opt_version) {\n  var version = opt_version || '1.1.0';\n  var child = createElementNS(getFilterNS(version), 'Filter');\n  var context = {\n    node: child\n  };\n  assign(context, {\n    'version': version,\n    'filter': filter\n  });\n  writeFilterCondition(child, filter, [context]);\n  return child;\n}\n/**\n * @param {Element} node Node.\n * @param {Array<string>} featureTypes Feature types.\n * @param {Array<*>} objectStack Node stack.\n */\n\nfunction writeGetFeature(node, featureTypes, objectStack) {\n  var context =\n  /** @type {Object} */\n  objectStack[objectStack.length - 1];\n  var item =\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  assign({}, context);\n  item.node = node;\n  pushSerializeAndPop(item, GETFEATURE_SERIALIZERS, makeSimpleNodeFactory('Query'), featureTypes, objectStack);\n}\n\nfunction getFilterNS(version) {\n  var ns;\n\n  if (version === '2.0.0') {\n    ns = FESNS[version];\n  } else {\n    ns = OGCNS[version];\n  }\n\n  return ns;\n}\n\nexport default WFS;","map":{"version":3,"mappings":"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","names":["GML2","GML3","GML32","GMLBase","GMLNS","XMLFeature","XML_SCHEMA_INSTANCE_URI","createElementNS","isDocument","makeArrayPusher","makeChildAppender","makeObjectPropertySetter","makeSimpleNodeFactory","parse","parseNode","pushParseAndPop","pushSerializeAndPop","and","andFilterFn","bbox","bboxFilterFn","assert","assign","get","getProjection","readNonNegativeIntegerString","readPositiveInteger","writeStringTextNode","FEATURE_COLLECTION_PARSERS","prototype","readGeometryElement","readFeaturesInternal","TRANSACTION_SUMMARY_PARSERS","TRANSACTION_RESPONSE_PARSERS","readTransactionSummary","readInsertResults","QUERY_SERIALIZERS","TRANSACTION_SERIALIZERS","writeFeature","writeUpdate","writeDelete","writeProperty","writeNative","FEATURE_PREFIX","XMLNS","OGCNS","WFSNS","FESNS","SCHEMA_LOCATIONS","GML_FORMATS","DEFAULT_VERSION","__extends","opt_options","_super","options","_this","version_","version","featureType_","featureType","featureNS_","featureNS","gmlFormat_","gmlFormat","schemaLocation_","schemaLocation","WFS","node","context","getReadOptions","objectStack","featuresNS","features","source","undefined","doc","readTransactionResponseFromDocument","readTransactionResponseFromNode","readFeatureCollectionMetadataFromDocument","readFeatureCollectionMetadataFromNode","n","firstChild","nextSibling","nodeType","Node","ELEMENT_NODE","result","value","getAttribute","setAttribute","handle","outputFormat","maxFeatures","String","resultType","startIndex","count","viewParams","setAttributeNS","srsName","featurePrefix","propertyNames","Array","isArray","featureTypes","filter","geometryName","combineBboxAndFilter","writeGetFeature","forEach","completeFilter","name","extent","opt_srsName","opt_filter","bboxFilter","inserts","updates","deletes","baseObj","gmlOptions","request","createTransactionRequest","serializeTransactionRequest","nativeElements","readProjectionFromNode","firstElementChild","nextElementSibling","childNodes","length","pop","gmlVersion","obj","hasZ","type","OGC_FID_PARSERS","fidParser","INSERT_RESULTS_PARSERS","feature","child","appendChild","writeFeatureElement","writeOgcFidFilter","fid","ns","getTypeName","prefix","indexOf","getId","typeName","getGeometryName","keys","getKeys","values","i","ii","name_1","getSimplifiedGeometry","push","pair","writeGeometryElement","nativeElement","vendorId","safeToIgnore","GETFEATURE_SERIALIZERS","writeQuery","writeDuringFilter","writeLogicalFilter","writeNotFilter","writeBboxFilter","writeSpatialFilter","writeDWithinFilter","writeComparisonFilter","writeIsNullFilter","writeIsBetweenFilter","writeIsLikeFilter","writeResourceIdFilter","typeNameAttr","item","getFilterNS","writeFilterCondition","getTagName","parent","format","writePropertyName","rid","geometry","distance","toString","unit","writeExpression","propertyName","timePeriod","begin","writeTimeInstant","end","conditions","condition","matchCase","writeLiteral","expression","lowerBoundary","upperBoundary","wildCard","singleChar","escapeChar","pattern","tagName","property","time","timeInstant","timePosition","writeFilter","opt_version"],"sourceRoot":"","sources":["../src/format/WFS.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}