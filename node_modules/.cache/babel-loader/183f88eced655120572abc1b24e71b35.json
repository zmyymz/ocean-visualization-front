{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/control/Rotate\n */\n\n\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport { CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE } from '../css.js';\nimport { easeOut } from '../easing.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='â‡§'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\n\nvar Rotate =\n/** @class */\nfunction (_super) {\n  __extends(Rotate, _super);\n  /**\n   * @param {Options} [opt_options] Rotate options.\n   */\n\n\n  function Rotate(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this, {\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target\n    }) || this;\n    var className = options.className !== undefined ? options.className : 'ol-rotate';\n    var label = options.label !== undefined ? options.label : \"\\u21E7\";\n    var compassClassName = options.compassClassName !== undefined ? options.compassClassName : 'ol-compass';\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n\n    _this.label_ = null;\n\n    if (typeof label === 'string') {\n      _this.label_ = document.createElement('span');\n      _this.label_.className = compassClassName;\n      _this.label_.textContent = label;\n    } else {\n      _this.label_ = label;\n\n      _this.label_.classList.add(compassClassName);\n    }\n\n    var tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n    var button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(_this.label_);\n    button.addEventListener(EventType.CLICK, _this.handleClick_.bind(_this), false);\n    var cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    var element = _this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n    _this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.duration_ = options.duration !== undefined ? options.duration : 250;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    _this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.rotation_ = undefined;\n\n    if (_this.autoHide_) {\n      _this.element.classList.add(CLASS_HIDDEN);\n    }\n\n    return _this;\n  }\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n\n\n  Rotate.prototype.handleClick_ = function (event) {\n    event.preventDefault();\n\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Rotate.prototype.resetNorth_ = function () {\n    var map = this.getMap();\n    var view = map.getView();\n\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n\n    var rotation = view.getRotation();\n\n    if (rotation !== undefined) {\n      if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  };\n  /**\n   * Update the rotate control element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  Rotate.prototype.render = function (mapEvent) {\n    var frameState = mapEvent.frameState;\n\n    if (!frameState) {\n      return;\n    }\n\n    var rotation = frameState.viewState.rotation;\n\n    if (rotation != this.rotation_) {\n      var transform = 'rotate(' + rotation + 'rad)';\n\n      if (this.autoHide_) {\n        var contains = this.element.classList.contains(CLASS_HIDDEN);\n\n        if (!contains && rotation === 0) {\n          this.element.classList.add(CLASS_HIDDEN);\n        } else if (contains && rotation !== 0) {\n          this.element.classList.remove(CLASS_HIDDEN);\n        }\n      }\n\n      this.label_.style.transform = transform;\n    }\n\n    this.rotation_ = rotation;\n  };\n\n  return Rotate;\n}(Control);\n\nexport default Rotate;","map":{"version":3,"mappings":"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","names":["Control","EventType","CLASS_CONTROL","CLASS_HIDDEN","CLASS_UNSELECTABLE","easeOut","__extends","opt_options","options","_super","element","document","createElement","render","target","className","undefined","label","compassClassName","_this","label_","textContent","classList","add","tipLabel","button","setAttribute","title","appendChild","addEventListener","CLICK","handleClick_","bind","cssClasses","callResetNorth_","resetNorth","duration_","duration","autoHide_","autoHide","rotation_","Rotate","event","preventDefault","resetNorth_","map","getMap","view","getView","rotation","getRotation","Math","PI","animate","easing","setRotation","mapEvent","frameState","viewState","transform","contains","remove","style"],"sourceRoot":"","sources":["../src/control/Rotate.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}