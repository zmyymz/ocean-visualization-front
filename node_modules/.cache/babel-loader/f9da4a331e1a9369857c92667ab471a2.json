{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/control/ScaleLine\n */\n\n\nimport Control from './Control.js';\nimport ProjUnits from '../proj/Units.js';\nimport { CLASS_UNSELECTABLE } from '../css.js';\nimport { METERS_PER_UNIT, getPointResolution } from '../proj.js';\nimport { assert } from '../asserts.js';\n/**\n * @type {string}\n */\n\nvar UNITS_PROP = 'units';\n/**\n * Units for the scale line. Supported values are `'degrees'`, `'imperial'`,\n * `'nautical'`, `'metric'`, `'us'`.\n * @enum {string}\n */\n\nexport var Units = {\n  DEGREES: 'degrees',\n  IMPERIAL: 'imperial',\n  NAUTICAL: 'nautical',\n  METRIC: 'metric',\n  US: 'us'\n};\n/**\n * @const\n * @type {Array<number>}\n */\n\nvar LEADING_DIGITS = [1, 2, 5];\n/**\n * @const\n * @type {number}\n */\n\nvar DEFAULT_DPI = 25.4 / 0.28;\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:units', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |'change:units', Return>} ScaleLineOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-scale-line'] CSS Class name.\n * @property {number} [minWidth=64] Minimum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {import(\"./ScaleLine.js\").Units|string} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n * @property {number|undefined} [dpi=undefined] dpi of output device such as printer. Only applies\n * when `bar` is `true`. If undefined the OGC default screen pixel size of 0.28mm will be assumed.\n */\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n *\n * @api\n */\n\nvar ScaleLine =\n/** @class */\nfunction (_super) {\n  __extends(ScaleLine, _super);\n  /**\n   * @param {Options} [opt_options] Scale line options.\n   */\n\n\n  function ScaleLine(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    var className = options.className !== undefined ? options.className : options.bar ? 'ol-scale-bar' : 'ol-scale-line';\n    _this = _super.call(this, {\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target\n    }) || this;\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.on;\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {ScaleLineOnSignature<void>}\n     */\n\n    _this.un;\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n\n    _this.innerElement_ = document.createElement('div');\n    _this.innerElement_.className = className + '-inner';\n    _this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n\n    _this.element.appendChild(_this.innerElement_);\n    /**\n     * @private\n     * @type {?import(\"../View.js\").State}\n     */\n\n\n    _this.viewState_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.renderedVisible_ = false;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.renderedWidth_ = undefined;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.renderedHTML_ = '';\n\n    _this.addChangeListener(UNITS_PROP, _this.handleUnitsChanged_);\n\n    _this.setUnits(options.units || Units.METRIC);\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n\n    _this.scaleBar_ = options.bar || false;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.scaleBarSteps_ = options.steps || 4;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.scaleBarText_ = options.text || false;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.dpi_ = options.dpi || undefined;\n    return _this;\n  }\n  /**\n   * Return the units to use in the scale line.\n   * @return {import(\"./ScaleLine.js\").Units} The units\n   * to use in the scale line.\n   * @observable\n   * @api\n   */\n\n\n  ScaleLine.prototype.getUnits = function () {\n    return this.get(UNITS_PROP);\n  };\n  /**\n   * @private\n   */\n\n\n  ScaleLine.prototype.handleUnitsChanged_ = function () {\n    this.updateElement_();\n  };\n  /**\n   * Set the units to use in the scale line.\n   * @param {import(\"./ScaleLine.js\").Units} units The units to use in the scale line.\n   * @observable\n   * @api\n   */\n\n\n  ScaleLine.prototype.setUnits = function (units) {\n    this.set(UNITS_PROP, units);\n  };\n  /**\n   * Specify the dpi of output device such as printer.\n   * @param {number|undefined} dpi The dpi of output device.\n   * @api\n   */\n\n\n  ScaleLine.prototype.setDpi = function (dpi) {\n    this.dpi_ = dpi;\n  };\n  /**\n   * @private\n   */\n\n\n  ScaleLine.prototype.updateElement_ = function () {\n    var viewState = this.viewState_;\n\n    if (!viewState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n\n      return;\n    }\n\n    var center = viewState.center;\n    var projection = viewState.projection;\n    var units = this.getUnits();\n    var pointResolutionUnits = units == Units.DEGREES ? ProjUnits.DEGREES : ProjUnits.METERS;\n    var pointResolution = getPointResolution(projection, viewState.resolution, center, pointResolutionUnits);\n    var minWidth = this.minWidth_ * (this.dpi_ || DEFAULT_DPI) / DEFAULT_DPI;\n    var nominalCount = minWidth * pointResolution;\n    var suffix = '';\n\n    if (units == Units.DEGREES) {\n      var metersPerDegree = METERS_PER_UNIT[ProjUnits.DEGREES];\n      nominalCount *= metersPerDegree;\n\n      if (nominalCount < metersPerDegree / 60) {\n        suffix = \"\\u2033\"; // seconds\n\n        pointResolution *= 3600;\n      } else if (nominalCount < metersPerDegree) {\n        suffix = \"\\u2032\"; // minutes\n\n        pointResolution *= 60;\n      } else {\n        suffix = \"\\xB0\"; // degrees\n      }\n    } else if (units == Units.IMPERIAL) {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution /= 0.0254;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.3048;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.344;\n      }\n    } else if (units == Units.NAUTICAL) {\n      pointResolution /= 1852;\n      suffix = 'nm';\n    } else if (units == Units.METRIC) {\n      if (nominalCount < 0.001) {\n        suffix = 'Î¼m';\n        pointResolution *= 1000000;\n      } else if (nominalCount < 1) {\n        suffix = 'mm';\n        pointResolution *= 1000;\n      } else if (nominalCount < 1000) {\n        suffix = 'm';\n      } else {\n        suffix = 'km';\n        pointResolution /= 1000;\n      }\n    } else if (units == Units.US) {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution *= 39.37;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.30480061;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.3472;\n      }\n    } else {\n      assert(false, 33); // Invalid units\n    }\n\n    var i = 3 * Math.floor(Math.log(minWidth * pointResolution) / Math.log(10));\n    var count, width, decimalCount;\n\n    while (true) {\n      decimalCount = Math.floor(i / 3);\n      var decimal = Math.pow(10, decimalCount);\n      count = LEADING_DIGITS[(i % 3 + 3) % 3] * decimal;\n      width = Math.round(count / pointResolution);\n\n      if (isNaN(width)) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n        return;\n      } else if (width >= minWidth) {\n        break;\n      }\n\n      ++i;\n    }\n\n    var html;\n\n    if (this.scaleBar_) {\n      html = this.createScaleBar(width, count, suffix);\n    } else {\n      html = count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n    }\n\n    if (this.renderedHTML_ != html) {\n      this.innerElement_.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n\n    if (this.renderedWidth_ != width) {\n      this.innerElement_.style.width = width + 'px';\n      this.renderedWidth_ = width;\n    }\n\n    if (!this.renderedVisible_) {\n      this.element.style.display = '';\n      this.renderedVisible_ = true;\n    }\n  };\n  /**\n   * @private\n   * @param {number} width The current width of the scalebar.\n   * @param {number} scale The current scale.\n   * @param {string} suffix The suffix to append to the scale text.\n   * @return {string} The stringified HTML of the scalebar.\n   */\n\n\n  ScaleLine.prototype.createScaleBar = function (width, scale, suffix) {\n    var mapScale = '1 : ' + Math.round(this.getScaleForResolution()).toLocaleString();\n    var scaleSteps = [];\n    var stepWidth = width / this.scaleBarSteps_;\n    var backgroundColor = '#ffffff';\n\n    for (var i = 0; i < this.scaleBarSteps_; i++) {\n      if (i === 0) {\n        // create the first marker at position 0\n        scaleSteps.push(this.createMarker('absolute', i));\n      }\n\n      scaleSteps.push('<div>' + '<div ' + 'class=\"ol-scale-singlebar\" ' + 'style=' + '\"width: ' + stepWidth + 'px;' + 'background-color: ' + backgroundColor + ';\"' + '>' + '</div>' + this.createMarker('relative', i) + (\n      /*render text every second step, except when only 2 steps */\n      i % 2 === 0 || this.scaleBarSteps_ === 2 ? this.createStepText(i, width, false, scale, suffix) : '') + '</div>');\n\n      if (i === this.scaleBarSteps_ - 1) {\n        {\n          /*render text at the end */\n        }\n        scaleSteps.push(this.createStepText(i + 1, width, true, scale, suffix));\n      } // switch colors of steps between black and white\n\n\n      if (backgroundColor === '#ffffff') {\n        backgroundColor = '#000000';\n      } else {\n        backgroundColor = '#ffffff';\n      }\n    }\n\n    var scaleBarText;\n\n    if (this.scaleBarText_) {\n      scaleBarText = '<div ' + 'class=\"ol-scale-text\" ' + 'style=\"width: ' + width + 'px;\">' + mapScale + '</div>';\n    } else {\n      scaleBarText = '';\n    }\n\n    var container = '<div ' + 'style=\"display: flex;\">' + scaleBarText + scaleSteps.join('') + '</div>';\n    return container;\n  };\n  /**\n   * Creates a marker at given position\n   * @param {string} position The position, absolute or relative\n   * @param {number} i The iterator\n   * @return {string} The stringified div containing the marker\n   */\n\n\n  ScaleLine.prototype.createMarker = function (position, i) {\n    var top = position === 'absolute' ? 3 : -10;\n    return '<div ' + 'class=\"ol-scale-step-marker\" ' + 'style=\"position: ' + position + ';' + 'top: ' + top + 'px;\"' + '></div>';\n  };\n  /**\n   * Creates the label for a marker marker at given position\n   * @param {number} i The iterator\n   * @param {number} width The width the scalebar will currently use\n   * @param {boolean} isLast Flag indicating if we add the last step text\n   * @param {number} scale The current scale for the whole scalebar\n   * @param {string} suffix The suffix for the scale\n   * @return {string} The stringified div containing the step text\n   */\n\n\n  ScaleLine.prototype.createStepText = function (i, width, isLast, scale, suffix) {\n    var length = i === 0 ? 0 : Math.round(scale / this.scaleBarSteps_ * i * 100) / 100;\n    var lengthString = length + (i === 0 ? '' : ' ' + suffix);\n    var margin = i === 0 ? -3 : width / this.scaleBarSteps_ * -1;\n    var minWidth = i === 0 ? 0 : width / this.scaleBarSteps_ * 2;\n    return '<div ' + 'class=\"ol-scale-step-text\" ' + 'style=\"' + 'margin-left: ' + margin + 'px;' + 'text-align: ' + (i === 0 ? 'left' : 'center') + '; ' + 'min-width: ' + minWidth + 'px;' + 'left: ' + (isLast ? width + 'px' : 'unset') + ';\"' + '>' + lengthString + '</div>';\n  };\n  /**\n   * Returns the appropriate scale for the given resolution and units.\n   * @return {number} The appropriate scale.\n   */\n\n\n  ScaleLine.prototype.getScaleForResolution = function () {\n    var resolution = getPointResolution(this.viewState_.projection, this.viewState_.resolution, this.viewState_.center, ProjUnits.METERS);\n    var dpi = this.dpi_ || DEFAULT_DPI;\n    var inchesPerMeter = 1000 / 25.4;\n    return parseFloat(resolution.toString()) * inchesPerMeter * dpi;\n  };\n  /**\n   * Update the scale line element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  ScaleLine.prototype.render = function (mapEvent) {\n    var frameState = mapEvent.frameState;\n\n    if (!frameState) {\n      this.viewState_ = null;\n    } else {\n      this.viewState_ = frameState.viewState;\n    }\n\n    this.updateElement_();\n  };\n\n  return ScaleLine;\n}(Control);\n\nexport default ScaleLine;","map":{"version":3,"mappings":"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","names":["Control","ProjUnits","CLASS_UNSELECTABLE","METERS_PER_UNIT","getPointResolution","assert","UNITS_PROP","Units","DEGREES","IMPERIAL","NAUTICAL","METRIC","US","LEADING_DIGITS","DEFAULT_DPI","__extends","opt_options","options","className","undefined","bar","_super","element","document","createElement","render","target","_this","on","once","un","innerElement_","appendChild","viewState_","minWidth_","minWidth","renderedVisible_","renderedWidth_","renderedHTML_","addChangeListener","handleUnitsChanged_","setUnits","units","scaleBar_","scaleBarSteps_","steps","scaleBarText_","text","dpi_","dpi","ScaleLine","get","updateElement_","set","viewState","style","display","center","projection","getUnits","pointResolutionUnits","METERS","pointResolution","resolution","nominalCount","suffix","metersPerDegree","i","Math","floor","log","count","width","decimalCount","decimal","pow","round","isNaN","html","createScaleBar","toFixed","innerHTML","scale","mapScale","getScaleForResolution","toLocaleString","scaleSteps","stepWidth","backgroundColor","push","createMarker","createStepText","scaleBarText","container","join","position","top","isLast","length","lengthString","margin","inchesPerMeter","parseFloat","toString","mapEvent","frameState"],"sourceRoot":"","sources":["../src/control/ScaleLine.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}