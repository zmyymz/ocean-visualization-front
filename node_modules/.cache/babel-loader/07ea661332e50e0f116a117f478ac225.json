{"ast":null,"code":"/**\n * @module ol/webgl\n */\nimport { assign } from './obj.js';\n/**\n * Constants taken from goog.webgl\n */\n\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\n\nexport var ARRAY_BUFFER = 0x8892;\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\n\nexport var ELEMENT_ARRAY_BUFFER = 0x8893;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var STREAM_DRAW = 0x88e0;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var STATIC_DRAW = 0x88e4;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var DYNAMIC_DRAW = 0x88e8;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_BYTE = 0x1401;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_SHORT = 0x1403;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_INT = 0x1405;\n/**\n * @const\n * @type {number}\n */\n\nexport var FLOAT = 0x1406;\n/** end of goog.webgl constants\n */\n\n/**\n * @const\n * @type {Array<string>}\n */\n\nvar CONTEXT_IDS = ['experimental-webgl', 'webgl', 'webkit-3d', 'moz-webgl'];\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object} [opt_attributes] Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\n\nexport function getContext(canvas, opt_attributes) {\n  var attributes = assign({\n    preserveDrawingBuffer: true\n  }, opt_attributes);\n  var ii = CONTEXT_IDS.length;\n\n  for (var i = 0; i < ii; ++i) {\n    try {\n      var context = canvas.getContext(CONTEXT_IDS[i], attributes);\n\n      if (context) {\n        return (\n          /** @type {!WebGLRenderingContext} */\n          context\n        );\n      }\n    } catch (e) {// pass\n    }\n  }\n\n  return null;\n}\n/**\n * @type {Array<string>}\n */\n\nvar supportedExtensions;\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\n\nexport function getSupportedExtensions() {\n  if (!supportedExtensions) {\n    var canvas = document.createElement('canvas');\n    var gl = getContext(canvas);\n\n    if (gl) {\n      supportedExtensions = gl.getSupportedExtensions();\n    }\n  }\n\n  return supportedExtensions;\n}","map":{"version":3,"mappings":"AAAA;;;AAIA,SAAQA,MAAR,QAAqB,UAArB;AAEA;;;;AAIA;;;;;;;;;AAQA,OAAO,IAAMC,YAAY,GAAG,MAArB;AAEP;;;;;;;;;AAQA,OAAO,IAAMC,oBAAoB,GAAG,MAA7B;AAEP;;;;;;;AAMA,OAAO,IAAMC,WAAW,GAAG,MAApB;AAEP;;;;;;;AAMA,OAAO,IAAMC,WAAW,GAAG,MAApB;AAEP;;;;;;;AAMA,OAAO,IAAMC,YAAY,GAAG,MAArB;AAEP;;;;;AAIA,OAAO,IAAMC,aAAa,GAAG,MAAtB;AAEP;;;;;AAIA,OAAO,IAAMC,cAAc,GAAG,MAAvB;AAEP;;;;;AAIA,OAAO,IAAMC,YAAY,GAAG,MAArB;AAEP;;;;;AAIA,OAAO,IAAMC,KAAK,GAAG,MAAd;AAEP;;;AAGA;;;;;AAIA,IAAMC,WAAW,GAAG,CAAC,oBAAD,EAAuB,OAAvB,EAAgC,WAAhC,EAA6C,WAA7C,CAApB;AAEA;;;;;;AAKA,OAAM,SAAUC,UAAV,CAAqBC,MAArB,EAA6BC,cAA7B,EAA2C;AAC/C,MAAMC,UAAU,GAAGd,MAAM,CAAC;AAACe,yBAAqB,EAAE;AAAxB,GAAD,EAAgCF,cAAhC,CAAzB;AACA,MAAMG,EAAE,GAAGN,WAAW,CAACO,MAAvB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,EAApB,EAAwB,EAAEE,CAA1B,EAA6B;AAC3B,QAAI;AACF,UAAMC,OAAO,GAAGP,MAAM,CAACD,UAAP,CAAkBD,WAAW,CAACQ,CAAD,CAA7B,EAAkCJ,UAAlC,CAAhB;;AACA,UAAIK,OAAJ,EAAa;AACX;AAAO;AAAuCA;AAA9C;AACD;AACF,KALD,CAKE,OAAOC,CAAP,EAAU,CACV;AACD;AACF;;AACD,SAAO,IAAP;AACD;AAED;;;;AAGA,IAAIC,mBAAJ;AAEA;;;;AAGA,OAAM,SAAUC,sBAAV,GAAgC;AACpC,MAAI,CAACD,mBAAL,EAA0B;AACxB,QAAMT,MAAM,GAAGW,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACA,QAAMC,EAAE,GAAGd,UAAU,CAACC,MAAD,CAArB;;AACA,QAAIa,EAAJ,EAAQ;AACNJ,yBAAmB,GAAGI,EAAE,CAACH,sBAAH,EAAtB;AACD;AACF;;AACD,SAAOD,mBAAP;AACD","names":["assign","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INT","FLOAT","CONTEXT_IDS","getContext","canvas","opt_attributes","attributes","preserveDrawingBuffer","ii","length","i","context","e","supportedExtensions","getSupportedExtensions","document","createElement","gl"],"sourceRoot":"","sources":["src/webgl.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}