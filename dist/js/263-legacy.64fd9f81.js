"use strict";(self["webpackChunkocean_vis"]=self["webpackChunkocean_vis"]||[]).push([[263],{4297:function(t,e,r){r.r(e),r.d(e,{default:function(){return ar}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{width:"100%",height:"100%","background-color":"#F3F2F3"}},[r("div",{ref:"vis",staticClass:"box"},[r("div",{attrs:{id:"dashboard"}},[r("div",{staticClass:"part",attrs:{id:"data_upload"}},[t._m(0),r("div",{staticClass:"center"},[r("input",{attrs:{type:"button",value:"导入台风数据",id:"data_btn"},on:{click:t.fileSubmit}})])]),r("el-divider"),r("div",{staticClass:"part",staticStyle:{"margin-bottom":"5%"}},[t._m(1),r("div",{staticStyle:{"margin-left":"8%"}},[r("el-radio-group",{attrs:{clearable:"true"},on:{change:t.initSelect},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[r("div",{staticClass:"type"},[r("el-radio",{attrs:{label:"wp"}},[t._v("西太平洋")]),r("div",{staticClass:"select"},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getData},model:{value:t.wp_value,callback:function(e){t.wp_value=e},expression:"wp_value"}},t._l(t.options1,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),r("div",{staticClass:"type"},[r("el-radio",{attrs:{label:"ep"}},[t._v("东太平洋")]),r("div",{staticClass:"select"},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getData},model:{value:t.ep_value,callback:function(e){t.ep_value=e},expression:"ep_value"}},t._l(t.options2,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),r("div",{staticClass:"type"},[r("el-radio",{attrs:{label:"na"}},[t._v("北大西洋")]),r("div",{staticClass:"select"},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getData},model:{value:t.na_value,callback:function(e){t.na_value=e},expression:"na_value"}},t._l(t.options3,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)])],1)])],1),r("div",{attrs:{id:"vis"}},[r("div",{attrs:{id:"route"}}),r("div",{attrs:{id:"vector"}}),r("div",{attrs:{id:"pressure"}},[t._m(2),r("div",{attrs:{id:"slider"}},[r("el-slider",{attrs:{min:100,max:1e3,"show-input":""},model:{value:t.pressure,callback:function(e){t.pressure=e},expression:"pressure"}})],1),r("div",{attrs:{id:"draw"}},[r("input",{attrs:{type:"button",value:"渲染",id:"draw_btn"},on:{click:t.drawVector}})])])])]),r("TyphoonInfo",{ref:"typhoonInfo",attrs:{typhoonData:this.finalData}})],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"title"},[r("h4",[t._v(" 台风强度智能预报结果可视化 ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"title"},[r("h4",[t._v(" 请选择对应海域 ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"title"},[r("h4",[t._v(" 请选择压强 ")])])}],i=r(6198),a=r(8307),s=r.n(a),l=(r(8975),r(1249),r(1539),r(4916),r(3123),r(8646),r(9141)),u=r(4010),p=r(5430),h=r(8462),c=r(1895),d=(r(1703),r(9600),r(186)),f=r(2758),g=r(6761),y=r(7498),v=r(5063),m=r(9210),_=r(5834),E=r(8735),R=r(5270),S=r(1262),P=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),C=function(t){function e(e,r,n,o,i,a,s){var l=this,u=e.getExtent(),p=r.getExtent(),h=p?(0,R.Ed)(n,p):n,c=(0,R.qg)(h),d=(0,E.aA)(e,r,c,o),f=v.m,g=new _.Z(e,r,h,u,d*f,o),m=g.calculateSourceExtent(),S=a(m,d,i),P=S?y.Z.IDLE:y.Z.EMPTY,C=S?S.getPixelRatio():1;return l=t.call(this,n,o,C,P)||this,l.targetProj_=r,l.maxSourceExtent_=u,l.triangulation_=g,l.targetResolution_=o,l.targetExtent_=n,l.sourceImage_=S,l.sourcePixelRatio_=C,l.interpolate_=s,l.canvas_=null,l.sourceListenerKey_=null,l}return P(e,t),e.prototype.disposeInternal=function(){this.state==y.Z.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==y.Z.LOADED){var e=(0,R.dz)(this.targetExtent_)/this.targetResolution_,r=(0,R.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,E.sY)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==y.Z.IDLE){this.state=y.Z.LOADING,this.changed();var t=this.sourceImage_.getState();t==y.Z.LOADED||t==y.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,S.oL)(this.sourceImage_,f.Z.CHANGE,(function(t){var e=this.sourceImage_.getState();e!=y.Z.LOADED&&e!=y.Z.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){(0,S.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(m.Z),O=C,w=r(7115),I=r(567),T=r(4156),N=r(2951),M=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},L=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return M(e,t),e}(g.ZP),F=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(n=e.interpolate),r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:n})||this,r.on,r.once,r.un,r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return M(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=(0,N.h7)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var o=this.getProjection();if(v.j&&o&&n&&!(0,T.OP)(o,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,T.OP)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(0,R.fS)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new O(o,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,o)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(n=o),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,n){return(0,I.O3)()},e.prototype.handleImageChange=function(t){var e,r=t.target;switch(r.getState()){case y.Z.LOADING:this.loading=!0,e=A.IMAGELOADSTART;break;case y.Z.LOADED:this.loading=!1,e=A.IMAGELOADEND;break;case y.Z.ERROR:this.loading=!1,e=A.IMAGELOADERROR;break;default:return}this.hasListener(e)&&this.dispatchEvent(new L(e,r))},e}(w.Z);function b(t,e){t.getImage().src=e}var x=F,Z=r(1797),D=r(1953),j=r(187),G=r(876),U=r(7037),Y=r(4407),B=r(7679),V=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),z=4,k=[101,101],q=function(t){function e(e){var r=this,n=e||{},o=void 0===n.imageSmoothing||n.imageSmoothing;return void 0!==n.interpolate&&(o=n.interpolate),r=t.call(this,{attributions:n.attributions,interpolate:o,projection:n.projection,resolutions:n.resolutions})||this,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:b,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return V(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var o=(0,T.U2)(r),i=this.getProjection();i&&i!==o&&(e=(0,E.aA)(i,o,t,e),t=(0,T.vs)(t,o,i));var a=(0,R.p8)(t,e,0,k),s={SERVICE:"WMS",VERSION:d.E,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_["LAYERS"]};(0,U.f0)(s,this.params_,n);var l=(0,Y.GW)((t[0]-a[0])/e,z),u=(0,Y.GW)((a[3]-t[1])/e,z);return s[this.v13_?"I":"X"]=l,s[this.v13_?"J":"Y"]=u,this.getRequestUrl_(a,k,1,i||o,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:d.E,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e["LAYER"]){var n=this.params_.LAYERS,o=!Array.isArray(n)||1===n.length;if(!o)return;r["LAYER"]=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1,a=28e-5;r["SCALE"]=t*i/a}return(0,U.f0)(r,e),(0,j.B)(this.url_,r)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var o=e/r,i=(0,R.qg)(t),a=(0,Y.mD)((0,R.dz)(t)/o,z),s=(0,Y.mD)((0,R.Cr)(t)/o,z),l=(0,R.p8)(i,o,0,[a,s]),u=(0,Y.mD)(this.ratio_*(0,R.dz)(t)/o,z),p=(0,Y.mD)(this.ratio_*(0,R.Cr)(t)/o,z),h=(0,R.p8)(i,o,0,[u,p]),c=this.image_;if(c&&this.renderedRevision_==this.getRevision()&&c.getResolution()==e&&c.getPixelRatio()==r&&(0,R.r4)(c.getExtent(),l))return c;var g={SERVICE:"WMS",VERSION:d.E,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};(0,U.f0)(g,this.params_),this.imageSize_[0]=(0,Y.NM)((0,R.dz)(h)/o,z),this.imageSize_[1]=(0,Y.NM)((0,R.Cr)(h)/o,z);var y=this.getRequestUrl_(h,this.imageSize_,r,n,g);return this.image_=new Z.Z(h,e,r,y,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(f.Z.CHANGE,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,o){if((0,G.h)(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o["STYLES"]=""),1!=r)switch(this.serverType_){case D.Z.GEOSERVER:var i=90*r+.5|0;"FORMAT_OPTIONS"in o?o["FORMAT_OPTIONS"]+=";dpi:"+i:o["FORMAT_OPTIONS"]="dpi:"+i;break;case D.Z.MAPSERVER:o["MAP_RESOLUTION"]=90*r;break;case D.Z.CARMENTA_SERVER:case D.Z.QGIS:o["DPI"]=90*r;break;default:(0,G.h)(!1,8);break}o["WIDTH"]=e[0],o["HEIGHT"]=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,o["BBOX"]=a.join(","),(0,j.B)(this.url_,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){(0,U.f0)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_["VERSION"]||d.E;this.v13_=(0,B.n)(t,"1.3")>=0},e}(x),X=q,W=r(1505),K=r(7654),H=r(2199),J=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return J(e,t),e}(H.Z),$=Q,tt=(r(7042),r(3658)),et=r(4845),rt=r(4572),nt=r(2483),ot=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),it=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return ot(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,o=n.resolution,i=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=(0,R.Ed)(s,(0,T.dY)(e.extent,n.projection))),!a[et.Z.ANIMATING]&&!a[et.Z.INTERACTING]&&!(0,R.xb)(s))if(i){var l=n.projection;if(!v.j){var u=i.getProjection();u&&(l=u)}var p=i.getImage(s,o,r,l);p&&this.loadImage(p)?this.image_=p:this.image_=null}else this.image_=null;return!!this.image_},e.prototype.getData=function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=(0,nt.nn)(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!(0,R.b8)(o,n))return null;var i=this.image_.getExtent(),a=this.image_.getImage(),s=(0,R.dz)(i),l=Math.floor(a.width*((n[0]-i[0])/s));if(l<0||l>=a.width)return null;var u=(0,R.Cr)(i),p=Math.floor(a.height*((i[3]-n[1])/u));return p<0||p>=a.height?null:this.getImageData(a,l,p)},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),o=r.getResolution(),i=r.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,l=t.viewState,u=l.center,p=l.resolution,h=t.size,c=s*o/(p*i),d=Math.round(h[0]*s),f=Math.round(h[1]*s),g=l.rotation;if(g){var y=Math.round(Math.sqrt(d*d+f*f));d=y,f=y}(0,nt.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,g,-d/2,-f/2),(0,nt.nb)(this.inversePixelTransform,this.pixelTransform);var v=(0,nt.BB)(this.pixelTransform);this.useContainer(e,v,a.opacity,this.getBackground(t));var m=this.context,_=m.canvas;_.width!=d||_.height!=f?(_.width=d,_.height=f):this.containerReused||m.clearRect(0,0,d,f);var E=!1,S=!0;if(a.extent){var P=(0,T.dY)(a.extent,l.projection);S=(0,R.kK)(P,t.extent),E=S&&!(0,R.r4)(P,t.extent),E&&this.clipUnrotated(m,t,P)}var C=r.getImage(),O=(0,nt.qC)(this.tempTransform,d/2,f/2,c,c,0,i*(n[0]-u[0])/o,i*(u[1]-n[3])/o);this.renderedResolution=o*s/i;var w=C.width*O[0],I=C.height*O[3];if(this.getLayer().getSource().getInterpolate()||(0,U.f0)(m,rt.$),this.preRender(m,t),S&&w>=.5&&I>=.5){var N=O[4],M=O[5],A=a.opacity,L=void 0;1!==A&&(L=m.globalAlpha,m.globalAlpha=A),m.drawImage(C,0,0,+C.width,+C.height,Math.round(N),Math.round(M),Math.round(w),Math.round(I)),1!==A&&(m.globalAlpha=L)}return this.postRender(m,t),E&&m.restore(),(0,U.f0)(m,rt.s),v!==_.style.transform&&(_.style.transform=v),this.container},e}(tt.Z),at=it,st=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(t){function e(e){return t.call(this,e)||this}return st(e,t),e.prototype.createRenderer=function(){return new at(this)},e.prototype.getData=function(e){return t.prototype.getData.call(this,e)},e}($),ut=lt,pt=r(4142),ht=r(7245),ct=r(6827),dt=r(7501),ft=r(1025),gt=r(9225),yt=r(4338),vt=r(2522),mt=r(5757);function _t(t,e,r,n,o,i,a){var s,l,u=(r-e)/n;if(1===u)s=e;else if(2===u)s=e,l=o;else if(0!==u){for(var p=t[e],h=t[e+1],c=0,d=[0],f=e+n;f<r;f+=n){var g=t[f],y=t[f+1];c+=Math.sqrt((g-p)*(g-p)+(y-h)*(y-h)),d.push(c),p=g,h=y}var v=o*c,m=(0,N.ry)(d,v);m<0?(l=(v-d[-m-2])/(d[-m-1]-d[-m-2]),s=e+(-m-2)*n):s=e+m*n}var _=a>1?a:2,E=i||new Array(_);for(f=0;f<_;++f)E[f]=void 0===s?NaN:void 0===l?t[s+f]:(0,Y.t7)(t[s+f],t[s+n+f],l);return E}function Et(t,e,r,n,o,i){if(r==e)return null;var a;if(o<t[e+n-1])return i?(a=t.slice(e,e+n),a[n-1]=o,a):null;if(t[r-1]<o)return i?(a=t.slice(r-n,r),a[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);var s=e/n,l=r/n;while(s<l){var u=s+l>>1;o<t[(u+1)*n-1]?l=u:s=u+1}var p=t[s*n-1];if(o==p)return t.slice((s-1)*n,(s-1)*n+n);var h=t[(s+1)*n-1],c=(o-p)/(h-p);a=[];for(var d=0;d<n-1;++d)a.push((0,Y.t7)(t[(s-1)*n+d],t[s*n+d],c));return a.push(o),a}function Rt(t,e,r,n,o,i,a){if(a)return Et(t,e,r[r.length-1],n,o,i);var s;if(o<t[n-1])return i?(s=t.slice(0,n),s[n-1]=o,s):null;if(t[t.length-1]<o)return i?(s=t.slice(t.length-n),s[n-1]=o,s):null;for(var l=0,u=r.length;l<u;++l){var p=r[l];if(e!=p){if(o<t[e+n-1])return null;if(o<=t[p-1])return Et(t,e,p,n,o,!1);e=p}}return null}var St=r(7273),Pt=r(6414),Ct=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return Ct(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?(0,N.l7)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,R.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,ft.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,ft.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return(0,vt.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=ht.Z.XYM&&this.layout!=ht.Z.XYZM)return null;var r=void 0!==e&&e;return Et(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return(0,mt.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return _t(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return(0,Pt.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=(0,yt.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,ht.Z.XY)},e.prototype.getType=function(){return ct.Z.LINE_STRING},e.prototype.intersectsExtent=function(t){return(0,St.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,gt.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(dt.ZP),wt=Ot,It=r(6739),Tt=r(5489),Nt=r(6386),Mt=r(3407),At=r(8263),Lt=r(4009),Ft=(r(5306),r(3210),r(7601),r(8309),r(1488)),bt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xt=function(t){function e(e,r,n){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&n)o.setFlatCoordinates(r,e),o.ends_=n;else{for(var i=o.getLayout(),a=e,s=[],l=[],u=0,p=a.length;u<p;++u){var h=a[u];0===u&&(i=h.getLayout()),(0,N.l7)(s,h.getFlatCoordinates()),l.push(s.length)}o.setFlatCoordinates(i,s),o.ends_=l}return o}return bt(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?(0,N.l7)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,R.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,ft.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,ft.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=ht.Z.XYM&&this.layout!=ht.Z.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,o=void 0!==r&&r;return Rt(this.flatCoordinates,0,this.ends_,this.stride,t,n,o)},e.prototype.getCoordinates=function(){return(0,mt.o1)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new wt(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],o=0,i=0,a=e.length;i<a;++i){var s=e[i],l=new wt(t.slice(o,s),r);n.push(l),o=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,o=this.stride,i=0,a=n.length;i<a;++i){var s=n[i],l=_t(e,r,s,o,.5);(0,N.l7)(t,l),r=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=(0,yt.UJ)(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,ht.Z.XY,n)},e.prototype.getType=function(){return ct.Z.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return(0,St.AW)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,gt._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(dt.ZP),Zt=xt,Dt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jt=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return Dt(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?(0,N.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<(0,R.qf)(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,i=this.stride,a=0,s=o.length;a<s;a+=i){var l=(0,Y.bI)(t,e,o[a],o[a+1]);if(l<n){n=l;for(var u=0;u<i;++u)r[u]=o[a+u];r.length=i}}return n},e.prototype.getCoordinates=function(){return(0,mt.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new pt.Z(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],o=0,i=t.length;o<i;o+=r){var a=new pt.Z(t.slice(o,o+r),e);n.push(a)}return n},e.prototype.getType=function(){return ct.Z.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,o=e.length;n<o;n+=r){var i=e[n],a=e[n+1];if((0,R.jE)(t,i,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,gt.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(dt.ZP),Gt=jt,Ut=r(6187),Yt=r(7952),Bt=r(8223),Vt=r(2777);function zt(t,e,r,n){for(var o=[],i=(0,R.lJ)(),a=0,s=r.length;a<s;++a){var l=r[a];i=(0,R.GN)(t,e,l[0],n),o.push((i[0]+i[2])/2,(i[1]+i[3])/2),e=l[l.length-1]}return o}var kt=r(2135),qt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xt=function(t){function e(e,r,n){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var i=o.getLayout(),a=e,s=[],l=[],u=0,p=a.length;u<p;++u){var h=a[u];0===u&&(i=h.getLayout());for(var c=s.length,d=h.getEnds(),f=0,g=d.length;f<g;++f)d[f]+=c;(0,N.l7)(s,h.getFlatCoordinates()),l.push(d)}r=i,e=s,n=l}return void 0!==r&&n?(o.setFlatCoordinates(r,e),o.endss_=n):o.setCoordinates(e,r),o}return qt(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;(0,N.l7)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(var n=0,o=e.length;n<o;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();var o=new e(this.flatCoordinates.slice(),this.layout,r);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,e,r,n){return n<(0,R.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,ft.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,ft.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return(0,kt.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return(0,Vt.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,Bt.dL)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,mt.ug)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=zt(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,Yt.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Gt(this.getFlatInteriorPoints().slice(),ht.Z.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,Bt.Oj)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,Bt.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=(0,yt.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,ht.Z.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),o=n[n.length-1];if(0!==e)for(var i=0,a=n.length;i<a;++i)n[i]-=e;return new Ut.ZP(this.flatCoordinates.slice(e,o),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],o=0,i=0,a=r.length;i<a;++i){var s=r[i].slice(),l=s[s.length-1];if(0!==o)for(var u=0,p=s.length;u<p;++u)s[u]-=o;var h=new Ut.ZP(e.slice(o,l),t,s);n.push(h),o=l}return n},e.prototype.getType=function(){return ct.Z.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return(0,St.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,gt.QT)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(dt.ZP),Wt=Xt,Kt=r(5856),Ht=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?(0,T.U2)(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===Kt.ZP.TILE_PIXELS&&(n=(0,T.U2)(n),n.setWorldExtent(e.extent)),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return(0,U.f0)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return(0,I.O3)()},t.prototype.readFeature=function(t,e){return(0,I.O3)()},t.prototype.readFeatures=function(t,e){return(0,I.O3)()},t.prototype.readGeometry=function(t,e){return(0,I.O3)()},t.prototype.readProjection=function(t){return(0,I.O3)()},t.prototype.writeFeature=function(t,e){return(0,I.O3)()},t.prototype.writeFeatures=function(t,e){return(0,I.O3)()},t.prototype.writeGeometry=function(t,e){return(0,I.O3)()},t}(),Jt=Ht;function Qt(t,e,r){var n,o=r?(0,T.U2)(r.featureProjection):null,i=r?(0,T.U2)(r.dataProjection):null;if(n=o&&i&&!(0,T.OP)(o,i)?(e?t.clone():t).transform(e?o:i,e?i:o):t,e&&r&&void 0!==r.decimals){var a=Math.pow(10,r.decimals),s=function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t};n===t&&(n=t.clone()),n.applyTransform(s)}return n}function $t(t,e){var r=e?(0,T.U2)(e.featureProjection):null,n=e?(0,T.U2)(e.dataProjection):null;return r&&n&&!(0,T.OP)(r,n)?(0,T.$A)(t,n,r):t}var te=r(8244);function ee(t,e){return Ee().createElementNS(t,e)}function re(t,e){return ne(t,e,[]).join("")}function ne(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{var n=void 0;for(n=t.firstChild;n;n=n.nextSibling)ne(n,e,r)}return r}function oe(t){return"documentElement"in t}function ie(t,e,r){return t.getAttributeNS(e,r)||""}function ae(t){return(new DOMParser).parseFromString(t,"application/xml")}function se(t,e){return function(r,n){var o=t.call(void 0!==e?e:this,r,n);if(void 0!==o){var i=n[n.length-1];i.push(o)}}}function le(t,e){return function(r,n){var o=t.call(void 0!==e?e:this,r,n);void 0!==o&&(n[n.length-1]=o)}}function ue(t,e){return function(r,n,o){t.call(void 0!==e?e:this,r,n,o);var i=o[o.length-1],a=i.node;a.appendChild(r)}}function pe(t,e){var r=t;return function(t,n,o){var i=n[n.length-1],a=i.node,s=r;void 0===s&&(s=o);var l=void 0!==e?e:a.namespaceURI;return ee(l,s)}}var he=pe();function ce(t,e,r){var n,o,i=void 0!==r?r:{};for(n=0,o=t.length;n<o;++n)i[t[n]]=e;return i}function de(t,e,r,n){var o;for(o=e.firstElementChild;o;o=o.nextElementSibling){var i=t[o.namespaceURI];if(void 0!==i){var a=i[o.localName];void 0!==a&&a.call(n,o,r)}}}function fe(t,e,r,n,o){return n.push(t),de(e,r,n,o),n.pop()}function ge(t,e,r,n,o,i){for(var a,s,l=(void 0!==o?o:r).length,u=0;u<l;++u)a=r[u],void 0!==a&&(s=e.call(void 0!==i?i:this,a,n,void 0!==o?o[u]:void 0),void 0!==s&&t[s.namespaceURI][s.localName].call(i,s,a,n))}function ye(t,e,r,n,o,i,a){return o.push(t),ge(e,r,n,o,i,a),o.pop()}var ve=void 0;function me(){return void 0===ve&&"undefined"!==typeof XMLSerializer&&(ve=new XMLSerializer),ve}var _e=void 0;function Ee(){return void 0===_e&&"undefined"!==typeof document&&(_e=document.implementation.createDocument("","",null)),_e}var Re=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Se=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=me(),e}return Re(e,t),e.prototype.getType=function(){return te.Z.XML},e.prototype.readFeature=function(t,e){if(t){if("string"===typeof t){var r=ae(t);return this.readFeatureFromDocument(r,e)}return oe(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"===typeof t){var r=ae(t);return this.readFeaturesFromDocument(r,e)}return oe(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,N.l7)(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return(0,I.O3)()},e.prototype.readGeometry=function(t,e){if(t){if("string"===typeof t){var r=ae(t);return this.readGeometryFromDocument(r,e)}return oe(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"===typeof t){var e=ae(t);return this.readProjectionFromDocument(e)}return oe(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(Jt),Pe=Se,Ce=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oe="http://www.opengis.net/gml",we=/^[\s\xa0]*$/,Ie=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:se(r.readFeaturesInternal),featureMembers:le(r.readFeaturesInternal)},r.supportedMediaTypes=["application/gml+xml"],r}return Ce(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=fe([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){var o=e[0],i=o["featureType"],a=o["featureNS"],s="p",l="p0";if(!i&&t.childNodes){i=[],a={};for(var u=0,p=t.childNodes.length;u<p;++u){var h=t.childNodes[u];if(1===h.nodeType){var c=h.nodeName.split(":").pop();if(-1===i.indexOf(c)){var d="",f=0,g=h.namespaceURI;for(var y in a){if(a[y]===g){d=y;break}++f}d||(d=s+f,a[d]=g),i.push(d+":"+c)}}}"featureMember"!=r&&(o["featureType"]=i,o["featureNS"]=a)}if("string"===typeof a){var v=a;a={},a[l]=v}var m={},_=Array.isArray(i)?i:[i];for(var E in a){var R={};for(u=0,p=_.length;u<p;++u){var S=-1===_[u].indexOf(":")?l:_[u].split(":")[0];S===E&&(R[_[u].split(":").pop()]="featureMembers"==r?se(this.readFeatureElement,this):le(this.readFeatureElement,this))}m[a[E]]=R}n=fe("featureMember"==r||"member"==r?void 0:[],m,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var r=e[0];r["srsName"]=t.firstElementChild.getAttribute("srsName"),r["srsDimension"]=t.firstElementChild.getAttribute("srsDimension");var n=fe(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?$t(n,r):Qt(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,o={},i=t.firstElementChild;i;i=i.nextElementSibling){var a=void 0,s=i.localName;0===i.childNodes.length||1===i.childNodes.length&&(3===i.firstChild.nodeType||4===i.firstChild.nodeType)?(a=re(i,!1),we.test(a)&&(a=void 0)):(r&&(a=this.readGeometryElement(i,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(i,e,!1)),o[s]?(o[s]instanceof Array||(o[s]=[o[s]]),o[s].push(a)):o[s]=a;var l=i.attributes.length;if(l>0){o[s]={_content_:o[s]};for(var u=0;u<l;u++){var h=i.attributes[u].name;o[s][h]=i.attributes[u].value}}}if(r){var c=new p.Z(o);n&&c.setGeometryName(n);var d=t.getAttribute("fid")||ie(t,this.namespace,"id");return d&&c.setId(d),c}return o},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode(t,e);if(r)return new pt.Z(r,ht.Z.XYZ)},e.prototype.readMultiPoint=function(t,e){var r=fe([],this.MULTIPOINT_PARSERS,t,e,this);return r?new Gt(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=fe([],this.MULTILINESTRING_PARSERS,t,e,this);if(r)return new Zt(r)},e.prototype.readMultiPolygon=function(t,e){var r=fe([],this.MULTIPOLYGON_PARSERS,t,e,this);if(r)return new Wt(r)},e.prototype.pointMemberParser=function(t,e){de(this.POINTMEMBER_PARSERS,t,e,this)},e.prototype.lineStringMemberParser=function(t,e){de(this.LINESTRINGMEMBER_PARSERS,t,e,this)},e.prototype.polygonMemberParser=function(t,e){de(this.POLYGONMEMBER_PARSERS,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode(t,e);if(r){var n=new wt(r,ht.Z.XYZ);return n}},e.prototype.readFlatLinearRing=function(t,e){var r=fe(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);return r||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode(t,e);if(r)return new Ft.Z(r,ht.Z.XYZ)},e.prototype.readPolygon=function(t,e){var r=fe([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n=r[0],o=[n.length],i=void 0,a=void 0;for(i=1,a=r.length;i<a;++i)(0,N.l7)(n,r[i]),o.push(n.length);return new Ut.ZP(n,ht.Z.XYZ,o)}},e.prototype.readFlatCoordinatesFromNode=function(t,e){return fe(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){var r=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return r||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};e&&(0,U.f0)(r,this.getReadOptions(t,e));var n=this.readFeaturesInternal(t,[r]);return n||[]},e.prototype.readProjectionFromNode=function(t){return(0,T.U2)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Pe);Ie.prototype.namespace=Oe,Ie.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Ie.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Ie.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Ie.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:se(Ie.prototype.pointMemberParser),pointMembers:se(Ie.prototype.pointMemberParser)}},Ie.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:se(Ie.prototype.lineStringMemberParser),lineStringMembers:se(Ie.prototype.lineStringMemberParser)}},Ie.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:se(Ie.prototype.polygonMemberParser),polygonMembers:se(Ie.prototype.polygonMemberParser)}},Ie.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:se(Ie.prototype.readFlatCoordinatesFromNode)}},Ie.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:se(Ie.prototype.readLineString)}},Ie.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:se(Ie.prototype.readPolygon)}},Ie.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:le(Ie.prototype.readFlatLinearRing)}};var Te=Ie;r(9714);function Ne(t,e){t.appendChild(Ee().createTextNode(e))}var Me=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ae=Oe+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",Le={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Fe=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,r.FEATURE_COLLECTION_PARSERS[Oe]["featureMember"]=se(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:Ae,r}return Me(e,t),e.prototype.readFlatCoordinates=function(t,e){var r=re(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],o=n["srsName"],i="enu";if(o){var a=(0,T.U2)(o);a&&(i=a.getAxisOrientation())}for(var s=r.trim().split(/\s+/),l=[],u=0,p=s.length;u<p;u++){var h=s[u].split(/,+/),c=parseFloat(h[0]),d=parseFloat(h[1]),f=3===h.length?parseFloat(h[2]):0;"en"===i.substr(0,2)?l.push(c,d,f):l.push(d,c,f)}return l},e.prototype.readBox=function(t,e){var r=fe([null],this.BOX_PARSERS_,t,e,this);return(0,R.T9)(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser=function(t,e){var r=fe(void 0,this.RING_PARSERS,t,e,this);if(r){var n=e[e.length-1];n.push(r)}},e.prototype.outerBoundaryIsParser=function(t,e){var r=fe(void 0,this.RING_PARSERS,t,e,this);if(r){var n=e[e.length-1];n[0]=r}},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,o=e[e.length-1],i=o["multiSurface"],a=o["surface"],s=o["multiCurve"];return Array.isArray(t)?n="Envelope":(n=t.getType(),"MultiPolygon"===n&&!0===i?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve")),ee("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var o=r[r.length-1],i=o["featureNS"],a=e.getGeometryName();o.serializers||(o.serializers={},o.serializers[i]={});var s=[],l=[];if(e.hasProperties()){var u=e.getProperties();for(var p in u){var h=u[p];null!==h&&(s.push(p),l.push(h),p==a||"function"===typeof h.getSimplifiedGeometry?p in o.serializers[i]||(o.serializers[i][p]=ue(this.writeGeometryElement,this)):p in o.serializers[i]||(o.serializers[i][p]=ue(Ne)))}}var c=(0,U.f0)({},o);c.node=t,ye(c,o.serializers,pe(void 0,i),l,r,s)},e.prototype.writeCurveOrLineString=function(t,e,r){var n=r[r.length-1],o=n["srsName"];if("LineStringSegment"!==t.nodeName&&o&&t.setAttribute("srsName",o),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var a=ee(t.namespaceURI,"segments");t.appendChild(a),this.writeCurveSegments_(a,e,r)}},e.prototype.writeLineStringOrCurveMember=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,r))},e.prototype.writeMultiCurveOrLineString=function(t,e,r){var n=r[r.length-1],o=n["hasZ"],i=n["srsName"],a=n["curve"];i&&t.setAttribute("srsName",i);var s=e.getLineStrings();ye({node:t,hasZ:o,srsName:i,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,o=r[r.length-1],i=(0,U.f0)({},o);i["node"]=t,n=Array.isArray(e)?$t(e,o):Qt(e,!0,o),ye(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=ee(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],o=n["hasZ"],i=n["srsName"],a=e.getCoordinates(),s=a.length,l=new Array(s),u=0;u<s;++u){var p=a[u];l[u]=this.getCoords_(p,i,o)}Ne(t,l.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=ee(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,r)},e.prototype.writeSurfaceOrPolygon=function(t,e,r){var n=r[r.length-1],o=n["hasZ"],i=n["srsName"];if("PolygonPatch"!==t.nodeName&&i&&t.setAttribute("srsName",i),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();ye({node:t,hasZ:o,srsName:i},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=ee(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],o=n.node,i=n["exteriorWritten"];return void 0===i&&(n["exteriorWritten"]=!0),ee(o.namespaceURI,void 0!==i?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=ee(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r)},e.prototype.writeRing=function(t,e,r){var n=ee(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=(0,T.U2)(e).getAxisOrientation());var o="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];if(r){var i=t[2]||0;o+=","+i}return o},e.prototype.writePoint=function(t,e,r){var n=r[r.length-1],o=n["hasZ"],i=n["srsName"];i&&t.setAttribute("srsName",i);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates(),l=this.getCoords_(s,i,o);Ne(a,l)},e.prototype.writeMultiPoint=function(t,e,r){var n=r[r.length-1],o=n["hasZ"],i=n["srsName"];i&&t.setAttribute("srsName",i);var a=e.getPoints();ye({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,pe("pointMember"),a,r,void 0,this)},e.prototype.writePointMember=function(t,e,r){var n=ee(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,r)},e.prototype.writeLinearRing=function(t,e,r){var n=r[r.length-1],o=n["srsName"];o&&t.setAttribute("srsName",o);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon=function(t,e,r){var n=r[r.length-1],o=n["hasZ"],i=n["srsName"],a=n["surface"];i&&t.setAttribute("srsName",i);var s=e.getPolygons();ye({node:t,hasZ:o,srsName:i,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1],o=n["srsName"];o&&t.setAttribute("srsName",o);var i=["lowerCorner","upperCorner"],a=[e[0]+" "+e[1],e[2]+" "+e[3]];ye({node:t},this.ENVELOPE_SERIALIZERS,he,a,r,i,this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return ee("http://www.opengis.net/gml",Le[n.nodeName])},e}(Te);Fe.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:le(Fe.prototype.readFlatCoordinates)}},Fe.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Fe.prototype.innerBoundaryIsParser,outerBoundaryIs:Fe.prototype.outerBoundaryIsParser}},Fe.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:se(Fe.prototype.readFlatCoordinates)}},Fe.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:le(Te.prototype.readPoint),MultiPoint:le(Te.prototype.readMultiPoint),LineString:le(Te.prototype.readLineString),MultiLineString:le(Te.prototype.readMultiLineString),LinearRing:le(Te.prototype.readLinearRing),Polygon:le(Te.prototype.readPolygon),MultiPolygon:le(Te.prototype.readMultiPolygon),Box:le(Fe.prototype.readBox)}},Fe.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:ue(Fe.prototype.writeCurveOrLineString),MultiCurve:ue(Fe.prototype.writeMultiCurveOrLineString),Point:ue(Fe.prototype.writePoint),MultiPoint:ue(Fe.prototype.writeMultiPoint),LineString:ue(Fe.prototype.writeCurveOrLineString),MultiLineString:ue(Fe.prototype.writeMultiCurveOrLineString),LinearRing:ue(Fe.prototype.writeLinearRing),Polygon:ue(Fe.prototype.writeSurfaceOrPolygon),MultiPolygon:ue(Fe.prototype.writeMultiSurfaceOrPolygon),Surface:ue(Fe.prototype.writeSurfaceOrPolygon),MultiSurface:ue(Fe.prototype.writeMultiSurfaceOrPolygon),Envelope:ue(Fe.prototype.writeEnvelope)}},Fe.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:ue(Fe.prototype.writeLineStringOrCurveMember),curveMember:ue(Fe.prototype.writeLineStringOrCurveMember)}},Fe.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:ue(Fe.prototype.writeRing),innerBoundaryIs:ue(Fe.prototype.writeRing)}},Fe.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:ue(Fe.prototype.writePointMember)}},Fe.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:ue(Fe.prototype.writeSurfaceOrPolygonMember),polygonMember:ue(Fe.prototype.writeSurfaceOrPolygonMember)}},Fe.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:ue(Ne),upperCorner:ue(Ne)}};var be=Fe,xe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ze="_feature",De="_layer",je=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new be,r.layers_=n.layers?n.layers:null,r}return xe(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var o=0,i=t.childNodes.length;o<i;o++){var a=t.childNodes[o];if(a.nodeType===Node.ELEMENT_NODE){var s=a,l=e[0],u=De,p=s.localName.replace(u,"");if(!this.layers_||(0,N.q9)(this.layers_,p)){var h=p+Ze;l["featureType"]=h,l["featureNS"]=this.featureNS_;var c={};c[h]=se(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var d=ce([l["featureNS"],null],c);s.setAttribute("namespaceURI",this.featureNS_);var f=fe([],d,s,e,this.gmlFormat_);f&&(0,N.l7)(n,f)}}}if("FeatureCollection"==r){var g=fe([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);g&&(n=g)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&(0,U.f0)(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(Pe),Ge=je,Ue=r(9726),Ye=(r(2222),r(4761)),Be=r(8756),Ve={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},ze=r(7703),ke=r(6781),qe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xe={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},We=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+ze.$A,r.element.style.position="absolute",r.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==(0,Ue.Z)(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(Xe.ELEMENT,r.handleElementChanged),r.addChangeListener(Xe.MAP,r.handleMapChanged),r.addChangeListener(Xe.OFFSET,r.handleOffsetChanged),r.addChangeListener(Xe.POSITION,r.handlePositionChanged),r.addChangeListener(Xe.POSITIONING,r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:Ve.TOP_LEFT),void 0!==e.position&&r.setPosition(e.position),r}return qe(e,t),e.prototype.getElement=function(){return this.get(Xe.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Xe.MAP)||null},e.prototype.getOffset=function(){return this.get(Xe.OFFSET)},e.prototype.getPosition=function(){return this.get(Xe.POSITION)},e.prototype.getPositioning=function(){return this.get(Xe.POSITIONING)},e.prototype.handleElementChanged=function(){(0,ke.ep)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,ke.ZF)(this.element),(0,S.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,S.oL)(t,Be.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Xe.ELEMENT,t)},e.prototype.setMap=function(t){this.set(Xe.MAP,t)},e.prototype.setOffset=function(t){this.set(Xe.OFFSET,t)},e.prototype.setPosition=function(t){this.set(Xe.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Xe.POSITION)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[(0,ke.iO)(n),(0,ke.Pb)(n)]),i=t||{},a=void 0===i.margin?20:i.margin;if(!(0,R.r4)(r,o)){var s=o[0]-r[0],l=r[2]-o[2],u=o[1]-r[1],p=r[3]-o[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),u<0?h[1]=u-a:p<0&&(h[1]=Math.abs(p)+a),0!==h[0]||0!==h[1]){var c=e.getView().getCenterInternal(),d=e.getPixelFromCoordinateInternal(c);if(!d)return;var f=[d[0]+h[0],d[1]+h[1]],g=i.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(Xe.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",l="0%";o==Ve.BOTTOM_RIGHT||o==Ve.CENTER_RIGHT||o==Ve.TOP_RIGHT?s="-100%":o!=Ve.BOTTOM_CENTER&&o!=Ve.CENTER_CENTER&&o!=Ve.TOP_CENTER||(s="-50%"),o==Ve.BOTTOM_LEFT||o==Ve.BOTTOM_CENTER||o==Ve.BOTTOM_RIGHT?l="-100%":o!=Ve.CENTER_LEFT&&o!=Ve.CENTER_CENTER&&o!=Ve.CENTER_RIGHT||(l="-50%");var u="translate(".concat(s,", ").concat(l,") translate(").concat(i,", ").concat(a,")");this.rendered.transform_!=u&&(this.rendered.transform_=u,r.transform=u,r.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(Ye.Z),Ke=We,He=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"typhoon-box",attrs:{id:"info-box"}},[t._m(0),r("div",{staticClass:"second"},[r("div",{staticClass:"left"},[r("span",{staticClass:"leftSpan"},[t._v("编号:")]),r("span",{staticClass:"rightSpan"},[t._v(t._s(t.typhoonData.id))])])]),r("div",{staticClass:"third odd"},[r("div",{staticClass:"left"},[r("span",{staticClass:"leftSpan"},[t._v("时间:")]),r("span",{staticClass:"rightSpan"},[t._v(t._s(t.typhoonData.properties.date)+"/"+t._s(t.typhoonData.properties.time.split(":")[0])+"时")])])]),r("div",{staticClass:"third"},[r("div",{staticClass:"left"},[r("span",{staticClass:"leftSpan"},[t._v("位置:")]),r("span",{staticClass:"rightSpan"},[t._v(t._s(t.typhoonData.properties.longitude)+"°/"+t._s(t.typhoonData.properties.latitude)+"°")])])]),r("div",{staticClass:"third odd"},[r("div",{staticClass:"left"},[r("span",{staticClass:"leftSpan"},[t._v("中心最大风速:")]),r("span",{staticClass:"rightSpan"},[t._v(t._s(t.typhoonData.properties["max wind speed(intensity)"]))])])]),r("div",{staticClass:"second"},[r("div",{staticClass:"left"},[r("span",{staticClass:"leftSpan"},[t._v("中心最小气压:")]),r("span",{staticClass:"rightSpan"},[t._v(t._s(t.typhoonData.properties["min pressure"]))])])])])},Je=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info"},[r("span",[t._v("实况台风信息")])])}],Qe={name:"TyphoonInfo",data:function(){return{}},props:{typhoonData:Object},methods:{}},$e=Qe,tr=r(1001),er=(0,tr.Z)($e,He,Je,!1,null,null,null),rr=er.exports,nr={data:function(){return{radio:"",wp_value:"",na_value:"",ep_value:"",options1:null,options2:null,options3:null,map:null,vectorMap:null,layer:null,imageLayer:null,routeData:null,lastZoomPoint:null,overlay:null,sequence:null,id:null,pressure:100,finalData:{id:"0",type:"Feature",properties:{date:"1979-01-02",latitude:5.2,longitude:168.7,"max wind speed(intensity)":50,"min pressure":990,time:"00:00:00"},geometry:{type:"Point",coordinates:[168.7,5.2]}},tfOverlay:null,imgUrl:r(9699)}},components:{TyphoonInfo:rr},methods:{fileSubmit:function(){var t=this,e=this;this.$MessageBox.alert('请将数据放置/opt/temp/home/user_typhoon_data/, 格式如下:<ul id="myUL">  <li><span class="caret">WP_solo/</span>   <ul class="nested"> <li><span class="caret">data_seq1/</span> <ul class="nested"> <li>tp_1_pl.nc</li><li>tp_2_pl.nc</li></ul></li><li>tp_seq1.txt</li></ul></li></ul>',"提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,callback:function(r){if("confirm"===r){var n=s().service({fullscreen:!0,lock:!0,text:"正在处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$http.get("api/ocean/processTyphoonData").then((function(t){var r=t.data.success;!0===r?(n.close(),e.$Message("上传成功")):!1===r&&(n.close(),e.$Message("发生异常 "+t.data.message))}))}}})},initSelect:function(){var t=this,e=this.radio;this.map.removeLayer(t.layer),this.vectorMap.removeLayer(t.imageLayer),this.$http.get("api/typhoon/getMetaInfo/"+e).then((function(r){t.options1=null,t.options2=null,t.options3=null;var n=r.data.data,o=n.typhoonMetaData;console.log(o),"wp"===e?t.options1=o:"ep"===e?t.options2=o:t.options3=o}))},getTyphoonData:function(t){var e=t;return fetch(e,{method:"GET"}).then((function(t){return t.status,t.statusText,t.headers,t.url,t.json()})).then((function(t){return t}))},getData:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.sequence=e,r="api/typhoon/getGeojsonData/"+this.radio+"/"+e,t.next=4,this.getTyphoonData(r);case 4:n=t.sent,this.routeData=n.data.geoJsonData,this.routeData=JSON.parse(this.routeData),this.routeData=this.routeData.featureList,this.addPointInterval(this.routeData),this.showInfo(this.routeData);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addPointInterval:function(t){var e,r=this,n=t,o=0,i=new W.Z,a=new h.Z,s=null;i.setSource(a);var l=setInterval((function(){if(o==n.length)return s.set("endPoint",!0),void clearInterval(l);var u=n[o].properties,h=[u.longitude,u.latitude];null!=s&&s.setStyle(new It.ZP({image:new Tt.Z({radius:3,fill:new Nt.Z({color:r.getColor(e)}),stroke:new Mt.Z({color:r.getColor(e),width:1})})})),0==o&&(r.map.getView().setCenter((0,T.mi)(h,"EPSG:4326")),r.vectorMap.getView().setCenter((0,T.mi)(h,"EPSG:4326")),r.map.getView().setZoom(3),r.vectorMap.getView().setZoom(5));var c=u["max wind speed(intensity)"],d=new p.Z({geometry:new pt.Z((0,T.mi)(h,"EPSG:4326"))});if(d.setStyle(new It.ZP({image:new At.Z({src:r.imgUrl,scale:.5,rotation:-360/n.length*o})})),i.getSource().addFeature(d),d.set("typhoonPoint",!0),d.set("id",o),s=d,e=c,o>0){var f=t[o-1].properties,g=[f.longitude,f.latitude],y=new p.Z({geometry:new wt([(0,T.mi)(h,"EPSG:4326"),(0,T.mi)(g,"EPSG:4326")])});a.addFeature(y)}o++}),80);this.map.addLayer(i),this.layer=i},showInfo:function(t){var e=this;this.map.on("pointermove",(function(r){var n=e.map.forEachFeatureAtPixel(r.pixel,(function(t){return t}));if(n){if(n.get("typhoonPoint")){e.map.getTargetElement().style.cursor="pointer",null==e.lastZoomPoint||e.lastZoomPoint.get("endPoint")||(e.lastZoomPoint.getStyle().getImage().setRadius(3),e.lastZoomPoint.changed()),n.get("endPoint")||(n.getStyle().getImage().setRadius(5),n.changed()),e.lastZoomPoint=n;var o=n.get("id");e.id=o+1,e.finalData=t[o];var i=r.coordinate;e.tfOverlay.setPosition(i),e.showVector()}}else null!=e.lastZoomPoint&&(e.lastZoomPoint.get("endPoint")||(e.lastZoomPoint.getStyle().getImage().setRadius(3),e.lastZoomPoint.changed(),e.lastZoomPoint=null)),e.map.getTargetElement().style.cursor="",e.tfOverlay.setPosition(void 0)}))},popUp:function(){var t=new Ke({element:this.$refs.typhoonInfo.$el,autoPan:{animation:{duration:250}}});this.tfOverlay=t,this.map.addOverlay(this.tfOverlay)},initMap:function(){var t=new K.Z({title:"谷歌矢量地图服务",source:new c.Z({url:"http://ocean-vis-http-server:8081/Typhoon/{z}/{x}/{y}.png"})}),e=new l.Z({target:"route",layers:[t],view:new u.ZP({projection:"EPSG:4326",center:[0,0],zoom:0}),controls:(0,Lt.ce)().extend([])});this.map=e;var r=new K.Z({title:"谷歌矢量地图服务",source:new c.Z({url:"http://ocean-vis-http-server:8081/Typhoon/{z}/{x}/{y}.png"})}),n=new l.Z({target:"vector",layers:[r],view:new u.ZP({projection:"EPSG:4326",center:[0,0],zoom:0}),controls:(0,Lt.ce)().extend([])});this.vectorMap=n},getColor:function(t){var e;return e=t>=10.8&&t<=17.1?"rgb(233,218,122)":t>=17.2&&t<=24.4?"rgb(16,29,199)":t>=24.5&&t<=32.6?"green":t>=32.7&&t<=41.4?"rgb(239,171,118)":t>=41.5&&t<=50.9?"rgb(193,89,196)":"red",e},showVector:function(){var t=this;this.vectorMap.removeLayer(t.imageLayer);var e=this.sequence.split("_")[1],r="cite:"+this.radio.toUpperCase()+"_data_"+e+"_tp_"+this.id+"_pl",n=new ut({source:new X({ratio:1,url:"vector/geoserver/cite/wms",crossOrigin:"anonynous",params:{FORMAT:"image/png",VERSION:"1.1.1",exceptions:"application/vnd.ogc.se_inimage",LAYERS:r}})}),o=new Ge({url:"vector/geoserver/cite/wms"});console.log(o),this.vectorMap.addLayer(n),this.imageLayer=n},drawVector:function(){var t=this;this.vectorMap.removeLayer(t.imageLayer);var e=this.sequence.split("_")[1],r="cite:"+this.radio.toUpperCase()+"_data_"+e+"_tp_1_pl",n=new ut({source:new X({ratio:1,url:"vector/geoserver/cite/wms",crossOrigin:"anonynous",params:{FORMAT:"image/png",VERSION:"1.1.1",exceptions:"application/vnd.ogc.se_inimage",LAYERS:r,CQL_FILTER:"level == "+this.pressure}})});this.vectorMap.addLayer(n),this.imageLayer=n}},mounted:function(){this.initMap(),this.popUp()}},or=nr,ir=(0,tr.Z)(or,n,o,!1,null,null,null),ar=ir.exports},9699:function(t){t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=263-legacy.64fd9f81.js.map