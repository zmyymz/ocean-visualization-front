(self["webpackChunkocean_vis"]=self["webpackChunkocean_vis"]||[]).push([[101],{3290:function(t,e,i){var r=i(2109),n=i(1285),o=i(1223);r({target:"Array",proto:!0},{fill:n}),o("fill")},5837:function(t,e,i){var r=i(2109),n=i(7854);r({global:!0},{globalThis:n})},2443:function(t,e,i){var r=i(7235);r("asyncIterator")},7614:function(t,e,i){var r,n,o=i(7964)["default"];i(4916),i(4765),i(7042),i(561),i(3753),i(2707),function(s,a){"object"==o(e)?t.exports=a():(r=a,n="function"===typeof r?r.call(e,i,e,t):r,void 0===n||(t.exports=n))}(0,(function(){"use strict";function t(t,r,n,o,s){!function t(i,r,n,o,s){for(;o>n;){if(o-n>600){var a=o-n+1,h=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1),f=Math.max(n,Math.floor(r-h*u/a+c)),p=Math.min(o,Math.floor(r+(a-h)*u/a+c));t(i,r,f,p,s)}var d=i[r],_=n,g=o;for(e(i,n,r),s(i[o],d)>0&&e(i,n,o);_<g;){for(e(i,_,g),_++,g--;s(i[_],d)<0;)_++;for(;s(i[g],d)>0;)g--}0===s(i[n],d)?e(i,n,g):e(i,++g,o),g<=r&&(n=g+1),r<=g&&(o=g-1)}}(t,r,n||0,o||t.length-1,s||i)}function e(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function i(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,r,n){n||(n=d(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];a(n,t.leaf?r(s):s)}return n}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(e,i,r,n,o){for(var s=[i,r];s.length;)if(!((r=s.pop())-(i=s.pop())<=n)){var a=i+Math.ceil((r-i)/n/2)*n;t(e,a,i,r,o),s.push(i,a,a,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,i=[];if(!p(t,e))return i;for(var r=this.toBBox,n=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;p(t,a)&&(e.leaf?i.push(s):f(t,a)?this._all(s,i):n.push(s))}e=n.pop()}return i},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var i=[];e;){for(var r=0;r<e.children.length;r++){var n=e.children[r],o=e.leaf?this.toBBox(n):n;if(p(t,o)){if(e.leaf||f(t,o))return!0;i.push(n)}}e=i.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var i,r,o,s=this.data,a=this.toBBox(t),h=[],l=[];s||h.length;){if(s||(s=h.pop(),r=h[h.length-1],i=l.pop(),o=!0),s.leaf){var u=n(t,s.children,e);if(-1!==u)return s.children.splice(u,1),h.push(s),this._condense(h),this}o||s.leaf||!f(s,a)?r?(i++,s=r.children[i],o=!1):s=null:(h.push(s),l.push(i),i=0,r=s,s=s.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},r.prototype._build=function(t,e,i,r){var n,s=i-e+1,a=this._maxEntries;if(s<=a)return o(n=d(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),(n=d([])).leaf=!1,n.height=r;var h=Math.ceil(s/a),l=h*Math.ceil(Math.sqrt(a));_(t,e,i,l,this.compareMinX);for(var u=e;u<=i;u+=l){var c=Math.min(u+l-1,i);_(t,u,c,h,this.compareMinY);for(var f=u;f<=c;f+=h){var p=Math.min(f+h-1,c);n.children.push(this._build(t,f,p,r-1))}}return o(n,this.toBBox),n},r.prototype._chooseSubtree=function(t,e,i,r){for(;r.push(e),!e.leaf&&r.length-1!==i;){for(var n=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=u(h),c=(f=t,p=h,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);c<o?(o=c,n=l<n?l:n,s=h):c===o&&l<n&&(n=l,s=h)}e=s||e.children[0]}var f,p;return e},r.prototype._insert=function(t,e,i){var r=i?t:this.toBBox(t),n=[],o=this._chooseSubtree(r,this.data,e,n);for(o.children.push(t),a(o,r);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(r,n,e)},r.prototype._split=function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var s=this._chooseSplitIndex(i,n,r),a=d(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,i){for(var r,n,o,a,h,l,c,f=1/0,p=1/0,d=e;d<=i-e;d++){var _=s(t,0,d,this.toBBox),g=s(t,d,i,this.toBBox),y=(n=_,o=g,a=void 0,h=void 0,l=void 0,c=void 0,a=Math.max(n.minX,o.minX),h=Math.max(n.minY,o.minY),l=Math.min(n.maxX,o.maxX),c=Math.min(n.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,c-h)),v=u(_)+u(g);y<f?(f=y,r=d,p=v<p?v:p):y===f&&v<p&&(p=v,r=d)}return r||i-e},r.prototype._chooseSplitAxis=function(t,e,i){var r=t.leaf?this.compareMinX:h,n=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,i,r){t.children.sort(r);for(var n=this.toBBox,o=s(t,0,e,n),h=s(t,i-e,i,n),l=c(o)+c(h),u=e;u<i-e;u++){var f=t.children[u];a(o,t.leaf?n(f):f),l+=c(o)}for(var p=i-e-1;p>=e;p--){var d=t.children[p];a(h,t.leaf?n(d):d),l+=c(h)}return l},r.prototype._adjustParentBBoxes=function(t,e,i){for(var r=i;r>=0;r--)a(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}))},8975:function(t,e,i){t=i.nmd(t);var r=i(7964)["default"];i(2526),i(1817),i(1539),i(2165),i(8783),i(3948),i(2443),i(9341),i(3706),i(408),i(489),i(8309),i(1703),i(4747),i(7042),i(5837);var n=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(b){l=function(t,e,i){return t[e]=i}}function u(t,e,i,r){var n=e&&e.prototype instanceof y?e:y,o=Object.create(n.prototype),s=new D(r||[]);return o._invoke=C(t,i,s),o}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(b){return{type:"throw",arg:b}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",d="executing",_="completed",g={};function y(){}function v(){}function m(){}var x={};l(x,s,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(k([])));I&&I!==i&&n.call(I,s)&&(x=I);var E=m.prototype=y.prototype=Object.create(x);function T(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function i(o,s,a,h){var l=c(t[o],t,s);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"===r(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,h)}),(function(t){i("throw",t,a,h)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,h)}))}h(l.arg)}var o;function s(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return o=o?o.then(n,n):n()}this._invoke=s}function C(t,e,i){var r=f;return function(n,o){if(r===d)throw new Error("Generator is already running");if(r===_){if("throw"===n)throw o;return F()}i.method=n,i.arg=o;while(1){var s=i.delegate;if(s){var a=w(s,i);if(a){if(a===g)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var h=c(t,e,i);if("normal"===h.type){if(r=i.done?_:p,h.arg===g)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(r=_,i.method="throw",i.arg=h.arg)}}}function w(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,w(t,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=c(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,g;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function k(t){if(t){var i=t[s];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){while(++r<t.length)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}return{next:F}}function F(){return{value:e,done:!0}}return v.prototype=m,l(E,"constructor",m),l(m,"constructor",v),v.displayName=l(m,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,h,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},T(O.prototype),l(O.prototype,a,(function(){return this})),t.AsyncIterator=O,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var s=new O(u(e,i,r,n),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},T(E),l(E,h,"Generator"),l(E,s,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=k,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(r,n){return a.type="throw",a.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var h=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(h&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),L(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;L(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:k(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}("object"===r(t)?t.exports:{});try{regeneratorRuntime=n}catch(o){"object"===("undefined"===typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},6198:function(t,e,i){"use strict";i.d(e,{Z:function(){return n}});i(1539);function r(t,e,i,r,n,o,s){try{var a=t[o](s),h=a.value}catch(l){return void i(l)}a.done?e(h):Promise.resolve(h).then(r,n)}function n(t){return function(){var e=this,i=arguments;return new Promise((function(n,o){var s=t.apply(e,i);function a(t){r(s,n,o,a,h,"next",t)}function h(t){r(s,n,o,a,h,"throw",t)}a(void 0)}))}}},5430:function(t,e,i){"use strict";i(1703);var r=i(4761),n=i(2758),o=i(876),s=i(1262),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h=function(t){function e(e){var i=t.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),e)if("function"===typeof e.getSimplifiedGeometry){var r=e;i.setGeometry(r)}else{var n=e;i.setProperties(n)}return i}return a(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,s.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=(0,s.oL)(t,n.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(r.Z);function l(t){if("function"===typeof t)return t;var e;if(Array.isArray(t))e=t;else{(0,o.h)("function"===typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}e["Z"]=h},2661:function(t,e,i){"use strict";i.d(e,{y:function(){return n}});var r=i(6314);function n(t){return Array.isArray(t)?(0,r.BB)(t):t}},8244:function(t,e){"use strict";e["Z"]={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},6414:function(t,e,i){"use strict";function r(t,e,i,r){for(var n=t[e],o=t[e+1],s=0,a=e+r;a<i;a+=r){var h=t[a],l=t[a+1];s+=Math.sqrt((h-n)*(h-n)+(l-o)*(l-o)),n=h,o=l}return s}i.d(e,{W:function(){return r}})},1505:function(t,e,i){"use strict";i.d(e,{Z:function(){return ee}});i(1703);var r=i(2199),n=i(7614),o=i(7037),s=i(6739),a=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),h={RENDER_ORDER:"renderOrder"},l=function(t){function e(e){var i=this,r=e||{},n=(0,o.f0)({},r);return delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,i=t.call(this,n)||this,i.declutter_=void 0!==r.declutter&&r.declutter,i.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(r.style),i.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return a(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(h.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new n(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(h.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:s.yF,this.styleFunction_=null===t?void 0:(0,s.J$)(this.style_),this.changed()},e}(r.Z),u=l,c=(i(1539),i(7042),i(561),i(1249),i(2707),i(9714),{BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12}),f=[c.FILL],p=[c.STROKE],d=[c.BEGIN_PATH],_=[c.CLOSE_PATH],g=c,y=i(6827),v=i(8997),m=function(){function t(){}return t.prototype.drawCustom=function(t,e,i,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),x=m,S=i(2661),I=i(5270),E=i(9569),T=i(2951),O=i(5757),C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),w=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=n,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return C(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,n=this.coordinates,o=n.length,s=0,a=t.length;s<a;s+=e)r[0]=t[s],r[1]=t[s+1],(0,I.b8)(i,r)&&(n[o++]=r[0],n[o++]=r[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,i,r,n,o){var s=this.coordinates,a=s.length,h=this.getBufferedMaxExtent();o&&(e+=r);var l,u,c,f=t[e],p=t[e+1],d=this.tmpCoordinate_,_=!0;for(l=e+r;l<i;l+=r)d[0]=t[l],d[1]=t[l+1],c=(0,I.pX)(h,d),c!==u?(_&&(s[a++]=f,s[a++]=p,_=!1),s[a++]=d[0],s[a++]=d[1]):c===v.Z.INTERSECTING?(s[a++]=d[0],s[a++]=d[1],_=!1):_=!0,f=d[0],p=d[1],u=c;return(n&&_||l===e+r)&&(s[a++]=f,s[a++]=p),a},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatLineCoordinates(t,e,a,r,!1,!1);n.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i,r){this.beginGeometry(t,e);var n,o,s,a,h,l=t.getType(),u=t.getStride(),c=this.coordinates.length;switch(l){case y.Z.MULTI_POLYGON:n=t.getOrientedFlatCoordinates(),a=[];var f=t.getEndss();h=0;for(var p=0,d=f.length;p<d;++p){var _=[];h=this.drawCustomCoordinates_(n,h,f[p],u,_),a.push(_)}this.instructions.push([g.CUSTOM,c,a,t,i,O.ug]),this.hitDetectionInstructions.push([g.CUSTOM,c,a,t,r||i,O.ug]);break;case y.Z.POLYGON:case y.Z.MULTI_LINE_STRING:s=[],n=l==y.Z.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(n,0,t.getEnds(),u,s),this.instructions.push([g.CUSTOM,c,s,t,i,O.o1]),this.hitDetectionInstructions.push([g.CUSTOM,c,s,t,r||i,O.o1]);break;case y.Z.LINE_STRING:case y.Z.CIRCLE:n=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(n,0,n.length,u,!1,!1),this.instructions.push([g.CUSTOM,c,o,t,i,O.Ml]),this.hitDetectionInstructions.push([g.CUSTOM,c,o,t,r||i,O.Ml]);break;case y.Z.MULTI_POINT:n=t.getFlatCoordinates(),o=this.appendFlatPointCoordinates(n,u),o>c&&(this.instructions.push([g.CUSTOM,c,o,t,i,O.Ml]),this.hitDetectionInstructions.push([g.CUSTOM,c,o,t,r||i,O.Ml]));break;case y.Z.POINT:n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),o=this.coordinates.length,this.instructions.push([g.CUSTOM,c,o,t,i]),this.hitDetectionInstructions.push([g.CUSTOM,c,o,t,r||i]);break;default:}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[g.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[g.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)i=e[t],r=i[0],r==g.END_GEOMETRY?o=t:r==g.BEGIN_GEOMETRY&&(i[2]=t,(0,T.FZ)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=(0,S.y)(r||E.bL)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=(0,S.y)(n||E.Tx);var o=e.getLineCap();i.lineCap=void 0!==o?o:E.mb;var s=e.getLineDash();i.lineDash=s?s.slice():E.X9;var a=e.getLineDashOffset();i.lineDashOffset=a||E.He;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:E.rc;var l=e.getWidth();i.lineWidth=void 0!==l?l:E.yC;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:E.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[g.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[g.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!(0,T.fS)(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[g.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,I.d9)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,I.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(x),R=w,L=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),D=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return L(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([g.DRAW_IMAGE,n,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([g.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([g.DRAW_IMAGE,n,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([g.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),r=t.getSize(),n=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=n,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0]*this.imagePixelRatio_,this.originY_=s[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterImageWithText_=e},e}(R),k=D,F=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),b=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return F(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,r){var n=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),s=[g.MOVE_TO_LINE_TO,n,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,E.X9,E.He],d);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(p),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],d);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinates_(s,h,o[l],a);this.hitDetectionInstructions.push(p),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(p),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(p),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(d)},e}(R),A=b,M=i(4338),G=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),P=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return G(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,r){var n=this.state,o=void 0!==n.fillStyle,s=void 0!==n.strokeStyle,a=i.length;this.instructions.push(d),this.hitDetectionInstructions.push(d);for(var h=0;h<a;++h){var l=i[h],u=this.coordinates.length,c=this.appendFlatLineCoordinates(t,e,l,r,!0,!s),y=[g.MOVE_TO_LINE_TO,u,c];this.instructions.push(y),this.hitDetectionInstructions.push(y),s&&(this.instructions.push(_),this.hitDetectionInstructions.push(_)),e=l}return o&&(this.instructions.push(f),this.hitDetectionInstructions.push(f)),s&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),e},e.prototype.drawCircle=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([g.SET_FILL_STYLE,E.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);var h=[g.CIRCLE,a];this.instructions.push(d,h),this.hitDetectionInstructions.push(d,h),void 0!==i.fillStyle&&(this.instructions.push(f),this.hitDetectionInstructions.push(f)),void 0!==i.strokeStyle&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([g.SET_FILL_STYLE,E.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([g.SET_FILL_STYLE,E.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([g.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinatess_(s,h,o[l],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,r=0,n=i.length;r<n;++r)i[r]=(0,M.uZ)(i[r],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(R),N=P,W=(i(7327),i(9600),i(1021)),Z=i(567);function Y(t,e,i,r,n){var o,s,a,h,l,u,c,f,p,d,_=i,g=i,y=0,v=0,m=i;for(s=i;s<r;s+=n){var x=e[s],S=e[s+1];void 0!==l&&(p=x-l,d=S-u,h=Math.sqrt(p*p+d*d),void 0!==c&&(v+=a,o=Math.acos((c*p+f*d)/(a*h)),o>t&&(v>y&&(y=v,_=m,g=s),v=0,m=s-n)),a=h,c=p,f=d),l=x,u=S}return v+=h,v>y?[m,s]:[_,g]}var B=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),X={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},j=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return B(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(i||r)){var o=this.coordinates,s=o.length,a=t.getType(),h=null,l=t.getStride();if(n.placement!==W.Z.LINE||a!=y.Z.LINE_STRING&&a!=y.Z.MULTI_LINE_STRING&&a!=y.Z.POLYGON&&a!=y.Z.MULTI_POLYGON){var u=n.overflow?null:[];switch(a){case y.Z.POINT:case y.Z.MULTI_POINT:h=t.getFlatCoordinates();break;case y.Z.LINE_STRING:h=t.getFlatMidpoint();break;case y.Z.CIRCLE:h=t.getCenter();break;case y.Z.MULTI_LINE_STRING:h=t.getFlatMidpoints(),l=2;break;case y.Z.POLYGON:h=t.getFlatInteriorPoint(),n.overflow||u.push(h[2]/this.resolution),l=3;break;case y.Z.MULTI_POLYGON:var c=t.getFlatInteriorPoints();h=[];for(C=0,w=c.length;C<w;C+=3)n.overflow||u.push(c[C+2]/this.resolution),h.push(c[C],c[C+1]);if(0===h.length)return;l=2;break;default:}A=this.appendFlatPointCoordinates(h,l);if(A===s)return;if(u&&(A-s)/2!==h.length/l){var f=s/2;u=u.filter((function(t,e){var i=o[2*(f+e)]===h[e*l]&&o[2*(f+e)+1]===h[e*l+1];return i||--f,i}))}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var p=n.padding;if(p!=E.oB&&(n.scale[0]<0||n.scale[1]<0)){var d=n.padding[0],_=n.padding[1],v=n.padding[2],m=n.padding[3];n.scale[0]<0&&(_=-_,m=-m),n.scale[1]<0&&(d=-d,v=-v),p=[d,_,v,m]}var x=this.pixelRatio;this.instructions.push([g.DRAW_IMAGE,s,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,p==E.oB?E.oB:p.map((function(t){return t*x})),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);var S=1/x;this.hitDetectionInstructions.push([g.DRAW_IMAGE,s,A,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,this.declutterImageWithText_,p,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}else{if(!(0,I.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var T=void 0;if(h=t.getFlatCoordinates(),a==y.Z.LINE_STRING)T=[h.length];else if(a==y.Z.MULTI_LINE_STRING)T=t.getEnds();else if(a==y.Z.POLYGON)T=t.getEnds().slice(0,1);else if(a==y.Z.MULTI_POLYGON){var O=t.getEndss();T=[];for(var C=0,w=O.length;C<w;++C)T.push(O[C][0])}this.beginGeometry(t,e);for(var R=n.textAlign,L=0,D=void 0,k=0,F=T.length;k<F;++k){if(void 0==R){var b=Y(n.maxAngle,h,L,T[k],l);L=b[0],D=b[1]}else D=T[k];for(var C=L;C<D;C+=l)o.push(h[C],h[C+1]);var A=o.length;L=T[k],this.drawChars_(s,A),s=A}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||E.PH,textBaseline:e.textBaseline||E.ru,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e){var i=this.textStrokeState_,r=this.textState_,n=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,h=X[r.textBaseline],l=this.textOffsetY_*a,u=this.text_,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([g.DRAW_CHARS,t,e,h,r.overflow,s,r.maxAngle,a,l,n,c*a,u,o,1]),this.hitDetectionInstructions.push([g.DRAW_CHARS,t,e,h,r.overflow,s,r.maxAngle,1,l,n,c,u,o,1/a])},e.prototype.setTextStyle=function(t,e){var i,r,n;if(t){var o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=(0,S.y)(o.getColor()||E.bL)):(r=null,this.textFillState_=r);var s=t.getStroke();if(s){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);var a=s.getLineDash(),h=s.getLineDashOffset(),l=s.getWidth(),u=s.getMiterLimit();n.lineCap=s.getLineCap()||E.mb,n.lineDash=a?a.slice():E.X9,n.lineDashOffset=void 0===h?E.He:h,n.lineJoin=s.getLineJoin()||E.rc,n.lineWidth=void 0===l?E.yC:l,n.miterLimit=void 0===u?E.V4:u,n.strokeStyle=(0,S.y)(s.getColor()||E.Tx)}else n=null,this.textStrokeState_=n;i=this.textState_;var c=t.getFont()||E.Df;(0,E.Qx)(c);var f=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||E.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||E.oB,i.scale=void 0===f?[1,1]:f;var p=t.getOffsetX(),d=t.getOffsetY(),_=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===g?0:g,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,Z.sq)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,Z.sq)(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(R),U=j,z={Circle:N,Default:R,Image:k,LineString:A,Polygon:N,Text:U},H=function(){function t(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var r in i){var n=i[r].finish();t[e][r]=n}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);var n=r[e];if(void 0===n){var o=z[e];n=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=n}return n},t}(),V=H,J=i(3658),K=(i(7941),i(9653),{CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}),q=(i(4603),i(8450),i(4916),i(8386),i(7601),i(3123),i(3290),i(3414)),$=i(2483),Q=i(4407),tt=i(5399);function et(t,e,i,r,n,o,s,a,h,l,u,c){var f=t[e],p=t[e+1],d=0,_=0,g=0,y=0;function v(){d=f,_=p,e+=r,f=t[e],p=t[e+1],y+=g,g=Math.sqrt((f-d)*(f-d)+(p-_)*(p-_))}do{v()}while(e<i-r&&y+g<o);var m=0===g?0:(o-y)/g,x=(0,Q.t7)(d,f,m),S=(0,Q.t7)(_,p,m),I=e-r,E=y,T=o+a*h(l,n,u);while(e<i-r&&y+g<T)v();m=0===g?0:(T-y)/g;var O,C=(0,Q.t7)(d,f,m),w=(0,Q.t7)(_,p,m);if(c){var R=[x,S,C,w];(0,tt.U1)(R,0,4,2,c,R,R),O=R[0]>R[2]}else O=x>C;var L,D=Math.PI,k=[],F=I+r===e;if(e=I,g=0,y=E,f=t[e],p=t[e+1],F){v(),L=Math.atan2(p-_,f-d),O&&(L+=L>0?-D:D);var b=(C+x)/2,A=(w+S)/2;return k[0]=[b,A,(T-o)/2,L,n],k}for(var M=0,G=n.length;M<G;){v();var P=Math.atan2(p-_,f-d);if(O&&(P+=P>0?-D:D),void 0!==L){var N=P-L;if(N+=N>D?-2*D:N<-D?2*D:0,Math.abs(N)>s)return null}L=P;for(var W=M,Z=0;M<G;++M){var Y=O?G-M-1:M,B=a*h(l,n[Y],u);if(e+r<i&&y+g<o+Z+B/2)break;Z+=B}if(M!==W){var X=O?n.substring(G-W,G-M):n.substring(W,M);m=0===g?0:(o+Z/2-y)/g;b=(0,Q.t7)(d,f,m),A=(0,Q.t7)(_,p,m);k.push([b,A,Z/2,P,X]),o+=Z}}return k}var it=i(6414),rt=(0,I.lJ)(),nt=[],ot=[],st=[],at=[];function ht(t){return t[3].declutterBox}var lt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ut(t,e){return"start"!==e&&"end"!==e||lt.test(t)||(e="start"===e?"left":"right"),X[e]}function ct(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var ft=function(){function t(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,$.Ue)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,r){var n=t+e+i+r;if(this.labels_[n])return this.labels_[n];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],h=this.pixelRatio,l=[a.scale[0]*h,a.scale[1]*h],u=Array.isArray(t),c=ut(u?t[0]:t,a.textAlign||E.PH),f=r&&o.lineWidth?o.lineWidth:0,p=u?t:t.split("\n").reduce(ct,[]),d=(0,E.Zw)(a,p),_=d.width,g=d.height,y=d.widths,v=d.heights,m=d.lineWidths,x=_+f,S=[],I=(x+2)*l[0],T=(g+f)*l[1],O={width:I<0?Math.floor(I):Math.ceil(I),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:S};if(1==l[0]&&1==l[1]||S.push("scale",l),r){S.push("strokeStyle",o.strokeStyle),S.push("lineWidth",f),S.push("lineCap",o.lineCap),S.push("lineJoin",o.lineJoin),S.push("miterLimit",o.miterLimit);var C=q.Id?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;C.prototype.setLineDash&&(S.push("setLineDash",[o.lineDash]),S.push("lineDashOffset",o.lineDashOffset))}i&&S.push("fillStyle",s.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");for(var w,R=.5-c,L=c*x+R*f,D=[],k=[],F=0,b=0,A=0,M=0,G=0,P=p.length;G<P;G+=2){var N=p[G];if("\n"!==N){var W=p[G+1]||a.font;W!==w&&(r&&D.push("font",W),i&&k.push("font",W),w=W),F=Math.max(F,v[A]);var Z=[N,L+R*y[A]+c*(y[A]-m[M]),.5*(f+F)+b];L+=y[A],r&&D.push("strokeText",Z),i&&k.push("fillText",Z),++A}else b+=F,F=0,L=c*x+R*f,++M}return Array.prototype.push.apply(S,D),Array.prototype.push.apply(S,k),this.labels_[n]=O,O},t.prototype.replayTextBackground_=function(t,e,i,r,n,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,i,r,n,o,s,a,h,l,u,c,f,p,d,_){s*=c[0],a*=c[1];var g,y=i-s,v=r-a,m=n+h>t?t-h:n,x=o+l>e?e-l:o,S=p[3]+m*c[0]+p[1],E=p[0]+x*c[1]+p[2],T=y-p[3],O=v-p[0];return(d||0!==u)&&(nt[0]=T,at[0]=T,nt[1]=O,ot[1]=O,ot[0]=T+S,st[0]=ot[0],st[1]=O+E,at[1]=st[1]),0!==u?(g=(0,$.qC)((0,$.Ue)(),i,r,1,1,u,-i,-r),(0,$.nn)(g,nt),(0,$.nn)(g,ot),(0,$.nn)(g,st),(0,$.nn)(g,at),(0,I.T9)(Math.min(nt[0],ot[0],st[0],at[0]),Math.min(nt[1],ot[1],st[1],at[1]),Math.max(nt[0],ot[0],st[0],at[0]),Math.max(nt[1],ot[1],st[1],at[1]),rt)):(0,I.T9)(Math.min(T,T+S),Math.min(O,O+E),Math.max(T,T+S),Math.max(O,O+E),rt),f&&(y=Math.round(y),v=Math.round(v)),{drawImageX:y,drawImageY:v,drawImageW:m,drawImageH:x,originX:h,originY:l,declutterBox:{minX:rt[0],minY:rt[1],maxX:rt[2],maxY:rt[3],value:_},canvasTransform:g,scale:c}},t.prototype.replayImageOrLabel_=function(t,e,i,r,n,o,s){var a=!(!o&&!s),h=r.declutterBox,l=t.canvas,u=s?s[2]*r.scale[0]/2:0,c=h.minX-u<=l.width/e&&h.maxX+u>=0&&h.minY-u<=l.height/e&&h.maxY+u>=0;return c&&(a&&this.replayTextBackground_(t,nt,ot,st,at,o,s),(0,E._f)(t,r.canvasTransform,n,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=(0,$.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t["strokeStyle"]=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,r){var n=this.textStates[e],o=this.createLabel(t,e,r,i),s=this.strokeStates[i],a=this.pixelRatio,h=ut(Array.isArray(t)?t[0]:t,n.textAlign||E.PH),l=X[n.textBaseline||E.ru],u=s&&s.lineWidth?s.lineWidth:0,c=o.width/a-2*n.scale[0],f=h*c+2*(.5-h)*u,p=l*o.height/a+2*(.5-l)*u;return{label:o,anchorX:f,anchorY:p}},t.prototype.execute_=function(t,e,i,r,n,o,s,a){var h;this.pixelCoordinates_&&(0,T.fS)(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,tt.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,$.lk)(this.renderedTransform_,i));var l,u,c,f,p,d,_,y,v,m,x,S,O,C,w,R,L=0,D=r.length,k=0,F=0,b=0,A=null,M=null,G=this.coordinateCache_,P=this.viewRotation_,N=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,W={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},Z=this.instructions!=r||this.overlaps?0:200;while(L<D){var Y=r[L],B=Y[0];switch(B){case g.BEGIN_GEOMETRY:O=Y[1],R=Y[3],O.getGeometry()?void 0===s||(0,I.kK)(s,R.getExtent())?++L:L=Y[2]+1:L=Y[2];break;case g.BEGIN_PATH:F>Z&&(this.fill_(t),F=0),b>Z&&(t.stroke(),b=0),F||b||(t.beginPath(),f=NaN,p=NaN),++L;break;case g.CIRCLE:k=Y[1];var j=h[k],U=h[k+1],z=h[k+2],H=h[k+3],V=z-j,J=H-U,K=Math.sqrt(V*V+J*J);t.moveTo(j+K,U),t.arc(j,U,K,0,2*Math.PI,!0),++L;break;case g.CLOSE_PATH:t.closePath(),++L;break;case g.CUSTOM:k=Y[1],l=Y[2];var q=Y[3],Q=Y[4],rt=6==Y.length?Y[5]:void 0;W.geometry=q,W.feature=O,L in G||(G[L]=[]);var nt=G[L];rt?rt(h,k,l,2,nt):(nt[0]=h[k],nt[1]=h[k+1],nt.length=2),Q(nt,W),++L;break;case g.DRAW_IMAGE:k=Y[1],l=Y[2],y=Y[3],u=Y[4],c=Y[5];var ot=Y[6],st=Y[7],at=Y[8],lt=Y[9],ut=Y[10],ct=Y[11],ft=Y[12],pt=Y[13],dt=Y[14];if(!y&&Y.length>=19){v=Y[18],m=Y[19],x=Y[20],S=Y[21];var _t=this.drawLabelWithPointPlacement_(v,m,x,S);y=_t.label,Y[3]=y;var gt=Y[22];u=(_t.anchorX-gt)*this.pixelRatio,Y[4]=u;var yt=Y[23];c=(_t.anchorY-yt)*this.pixelRatio,Y[5]=c,ot=y.height,Y[6]=ot,pt=y.width,Y[13]=pt}var vt=void 0;Y.length>24&&(vt=Y[24]);var mt=void 0,xt=void 0,St=void 0;Y.length>16?(mt=Y[15],xt=Y[16],St=Y[17]):(mt=E.oB,xt=!1,St=!1),ut&&N?ct+=P:ut||N||(ct-=P);for(var It=0;k<l;k+=2)if(!(vt&&vt[It++]<pt/this.pixelRatio)){var Et=this.calculateImageOrLabelDimensions_(y.width,y.height,h[k],h[k+1],pt,ot,u,c,at,lt,ct,ft,n,mt,xt||St,O),Tt=[t,e,y,Et,st,xt?A:null,St?M:null],Ot=void 0,Ct=void 0;if(a&&dt){var wt=l-k;if(!dt[wt]){dt[wt]=Tt;continue}if(Ot=dt[wt],delete dt[wt],Ct=ht(Ot),a.collides(Ct))continue}a&&a.collides(Et.declutterBox)||(Ot&&(a&&a.insert(Ct),this.replayImageOrLabel_.apply(this,Ot)),a&&a.insert(Et.declutterBox),this.replayImageOrLabel_.apply(this,Tt))}++L;break;case g.DRAW_CHARS:var Rt=Y[1],Lt=Y[2],Dt=Y[3],kt=Y[4];S=Y[5];var Ft=Y[6],bt=Y[7],At=Y[8];x=Y[9];var Mt=Y[10];v=Y[11],m=Y[12];var Gt=[Y[13],Y[13]],Pt=this.textStates[m],Nt=Pt.font,Wt=[Pt.scale[0]*bt,Pt.scale[1]*bt],Zt=void 0;Nt in this.widths_?Zt=this.widths_[Nt]:(Zt={},this.widths_[Nt]=Zt);var Yt=(0,it.W)(h,Rt,Lt,2),Bt=Math.abs(Wt[0])*(0,E.Kd)(Nt,v,Zt);if(kt||Bt<=Yt){var Xt=this.textStates[m].textAlign,jt=(Yt-Bt)*X[Xt],Ut=et(h,Rt,Lt,2,v,jt,Ft,Math.abs(Wt[0]),E.Kd,Nt,Zt,N?0:this.viewRotation_);t:if(Ut){var zt=[],Ht=void 0,Vt=void 0,Jt=void 0,Kt=void 0,qt=void 0;if(x)for(Ht=0,Vt=Ut.length;Ht<Vt;++Ht){qt=Ut[Ht],Jt=qt[4],Kt=this.createLabel(Jt,m,"",x),u=qt[2]+(Wt[0]<0?-Mt:Mt),c=Dt*Kt.height+2*(.5-Dt)*Mt*Wt[1]/Wt[0]-At;Et=this.calculateImageOrLabelDimensions_(Kt.width,Kt.height,qt[0],qt[1],Kt.width,Kt.height,u,c,0,0,qt[3],Gt,!1,E.oB,!1,O);if(a&&a.collides(Et.declutterBox))break t;zt.push([t,e,Kt,Et,1,null,null])}if(S)for(Ht=0,Vt=Ut.length;Ht<Vt;++Ht){qt=Ut[Ht],Jt=qt[4],Kt=this.createLabel(Jt,m,S,""),u=qt[2],c=Dt*Kt.height-At;Et=this.calculateImageOrLabelDimensions_(Kt.width,Kt.height,qt[0],qt[1],Kt.width,Kt.height,u,c,0,0,qt[3],Gt,!1,E.oB,!1,O);if(a&&a.collides(Et.declutterBox))break t;zt.push([t,e,Kt,Et,1,null,null])}a&&a.load(zt.map(ht));for(var $t=0,Qt=zt.length;$t<Qt;++$t)this.replayImageOrLabel_.apply(this,zt[$t])}}++L;break;case g.END_GEOMETRY:if(void 0!==o){O=Y[1];var te=o(O,R);if(te)return te}++L;break;case g.FILL:Z?F++:this.fill_(t),++L;break;case g.MOVE_TO_LINE_TO:for(k=Y[1],l=Y[2],C=h[k],w=h[k+1],d=C+.5|0,_=w+.5|0,d===f&&_===p||(t.moveTo(C,w),f=d,p=_),k+=2;k<l;k+=2)C=h[k],w=h[k+1],d=C+.5|0,_=w+.5|0,k!=l-2&&d===f&&_===p||(t.lineTo(C,w),f=d,p=_);++L;break;case g.SET_FILL_STYLE:A=Y,this.alignFill_=Y[2],F&&(this.fill_(t),F=0,b&&(t.stroke(),b=0)),t.fillStyle=Y[1],++L;break;case g.SET_STROKE_STYLE:M=Y,b&&(t.stroke(),b=0),this.setStrokeStyle_(t,Y),++L;break;case g.STROKE:Z?b++:t.stroke(),++L;break;default:++L;break}}F&&this.fill_(t),b&&t.stroke()},t.prototype.execute=function(t,e,i,r,n,o){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,n,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,i,r,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,n)},t}(),pt=ft,dt=i(6781),_t=[K.POLYGON,K.CIRCLE,K.LINE_STRING,K.IMAGE,K.TEXT,K.DEFAULT],gt=function(){function t(t,e,i,r,n,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,$.Ue)(),this.createExecutors_(n)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var r=t[e];for(var n in r){var o=r[n];i[n]=new pt(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],r=0,n=t.length;r<n;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o){r=Math.round(r);var s=2*r+1,a=(0,$.qC)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=(0,dt.E4)(s,s));var l,u=this.hitDetectionContext_;u.canvas.width!==s||u.canvas.height!==s?(u.canvas.width=s,u.canvas.height=s):h||u.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(l=(0,I.lJ)(),(0,I.Wj)(l,t),(0,I.f3)(l,e*(this.renderBuffer_+r),l));var c,f=vt(r);function p(t,e){for(var i=u.getImageData(0,0,s,s).data,a=0,h=f.length;a<h;a++)if(i[f[a]]>0){if(!o||c!==K.IMAGE&&c!==K.TEXT||-1!==o.indexOf(t)){var l=(f[a]-3)/4,p=r-l%s,d=r-(l/s|0),_=n(t,e,p*p+d*d);if(_)return _}u.clearRect(0,0,s,s);break}}var d,_,g,y,v,m=Object.keys(this.executorsByZIndex_).map(Number);for(m.sort(T.kK),d=m.length-1;d>=0;--d){var x=m[d].toString();for(g=this.executorsByZIndex_[x],_=_t.length-1;_>=0;--_)if(c=_t[_],y=g[c],void 0!==y&&(v=y.executeHitDetection(u,a,i,p,l),v))return v}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],r=e[1],n=e[2],o=e[3],s=[i,r,i,o,n,o,n,r];return(0,tt.vT)(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return(0,o.xb)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,r,n,o,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(T.kK),this.maxExtent_&&(t.save(),this.clip(t,i));var h,l,u,c,f,p,d=o||_t;for(s&&a.reverse(),h=0,l=a.length;h<l;++h){var _=a[h].toString();for(f=this.executorsByZIndex_[_],u=0,c=d.length;u<c;++u){var g=d[u];p=f[g],void 0!==p&&p.execute(t,e,i,r,n,s)}}this.maxExtent_&&t.restore()},t}(),yt={};function vt(t){if(void 0!==yt[t])return yt[t];for(var e=2*t+1,i=t*t,r=new Array(i+1),n=0;n<=t;++n)for(var o=0;o<=t;++o){var s=n*n+o*o;if(s>i)break;var a=r[s];a||(a=[],r[s]=a),a.push(4*((t+n)*e+(t+o))+3),n>0&&a.push(4*((t-n)*e+(t+o))+3),o>0&&(a.push(4*((t+n)*e+(t-o))+3),n>0&&a.push(4*((t-n)*e+(t-o))+3))}for(var h=[],l=(n=0,r.length);n<l;++n)r[n]&&h.push.apply(h,r[n]);return yt[t]=h,h}var mt=gt,xt=i(4845),St=(i(5306),i(7501)),It=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Et=function(t){function e(e,i,r,n,o,s,a){var h=t.call(this)||this;return h.context_=e,h.pixelRatio_=i,h.extent_=r,h.transform_=n,h.viewRotation_=o,h.squaredTolerance_=s,h.userTransform_=a,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,$.Ue)(),h}return It(e,t),e.prototype.drawImages_=function(t,e,i,r){if(this.image_){var n=(0,tt.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,u=n.length;l<u;l+=2){var c=n[l]-this.imageAnchorX_,f=n[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=c+this.imageAnchorX_,d=f+this.imageAnchorY_;(0,$.qC)(s,p,d,1,1,h,-p,-d),o.setTransform.apply(o,s),o.translate(p,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=(0,tt.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=r){var a=n[e]+this.textOffsetX_,h=n[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]){var l=(0,$.qC)(this.tmpLocalTransform_,a,h,1,1,s,-a,-h);o.setTransform.apply(o,l),o.translate(a,h),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,a,h),this.textFillState_&&o.fillText(this.text_,a,h)}}},e.prototype.moveToLineTo_=function(t,e,i,r,n){var o=this.context_,s=(0,tt.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;n&&(a-=2);for(var h=2;h<a;h+=2)o.lineTo(s[h],s[h+1]);return n&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,r){for(var n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e},e.prototype.drawCircle=function(t){if((0,I.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,St.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var e=t.getType();switch(e){case y.Z.POINT:this.drawPoint(t);break;case y.Z.LINE_STRING:this.drawLineString(t);break;case y.Z.POLYGON:this.drawPolygon(t);break;case y.Z.MULTI_POINT:this.drawMultiPoint(t);break;case y.Z.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case y.Z.MULTI_POLYGON:this.drawMultiPolygon(t);break;case y.Z.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case y.Z.CIRCLE:this.drawCircle(t);break;default:}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,I.kK)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,I.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates(),n=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=o.length;a<h;++a)n=this.moveToLineTo_(r,n,o[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,n=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=n.length;s<a;++s){var h=n[s];r=this.drawRings_(i,r,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&((0,T.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:E.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var i=this;if(t){var r=t.getColor();this.fillState_={fillStyle:(0,S.y)(r||E.bL)}}else this.fillState_=null;if(e){var n=e.getColor(),o=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),h=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),c=s||E.X9;this.strokeState_={lineCap:void 0!==o?o:E.mb,lineDash:1===this.pixelRatio_?c:c.map((function(t){return t*i.pixelRatio_})),lineDashOffset:(a||E.He)*this.pixelRatio_,lineJoin:void 0!==h?h:E.rc,lineWidth:(void 0!==l?l:E.yC)*this.pixelRatio_,miterLimit:void 0!==u?u:E.V4,strokeStyle:(0,S.y)(n||E.Tx)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:(0,S.y)(i||E.bL)}}else this.textFillState_=null;var r=t.getStroke();if(r){var n=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),a=r.getLineDashOffset(),h=r.getLineJoin(),l=r.getWidth(),u=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:E.mb,lineDash:s||E.X9,lineDashOffset:a||E.He,lineJoin:void 0!==h?h:E.rc,lineWidth:void 0!==l?l:E.yC,miterLimit:void 0!==u?u:E.V4,strokeStyle:(0,S.y)(n||E.Tx)}}else this.textStrokeState_=null;var c=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),_=t.getRotation(),g=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:E.Df,textAlign:void 0!==v?v:E.PH,textBaseline:void 0!==m?m:E.ru},this.text_=void 0!==y?Array.isArray(y)?y.reduce((function(t,e,i){return t+(i%2?" ":e)}),""):y:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""},e}(x),Tt=Et,Ot=i(5316),Ct=i(8263),wt=.5;function Rt(t,e,i,r,n,o,s){var a=t[0]*wt,h=t[1]*wt,l=(0,dt.E4)(a,h);l.imageSmoothingEnabled=!1;for(var u=l.canvas,c=new Tt(l,wt,n,null,s),f=i.length,p=Math.floor(16777215/f),d={},_=1;_<=f;++_){var g=i[_-1],v=g.getStyleFunction()||r;if(r){var m=v(g,o);if(m){Array.isArray(m)||(m=[m]);for(var x=_*p,S="#"+("000000"+x.toString(16)).slice(-6),E=0,O=m.length;E<O;++E){var C=m[E],w=C.getGeometryFunction()(g);if(w&&(0,I.kK)(n,w.getExtent())){var R=C.clone(),L=R.getFill();L&&L.setColor(S);var D=R.getStroke();D&&(D.setColor(S),D.setLineDash(null)),R.setText(void 0);var k=C.getImage();if(k&&0!==k.getOpacity()){var F=k.getImageSize();if(!F)continue;var b=(0,dt.E4)(F[0],F[1],void 0,{alpha:!1}),A=b.canvas;b.fillStyle=S,b.fillRect(0,0,A.width,A.height),R.setImage(new Ct.Z({img:A,imgSize:F,anchor:k.getAnchor(),anchorXUnits:Ot.Z.PIXELS,anchorYUnits:Ot.Z.PIXELS,offset:k.getOrigin(),opacity:1,size:k.getSize(),scale:k.getScale(),rotation:k.getRotation(),rotateWithView:k.getRotateWithView()}))}var M=R.getZIndex()||0,G=d[M];G||(G={},d[M]=G,G[y.Z.POLYGON]=[],G[y.Z.CIRCLE]=[],G[y.Z.LINE_STRING]=[],G[y.Z.POINT]=[]),G[w.getType().replace("Multi","")].push(w,R)}}}}}for(var P=Object.keys(d).map(Number).sort(T.kK),N=(_=0,P.length);_<N;++_){G=d[P[_]];for(var W in G){var Z=G[W];for(E=0,O=Z.length;E<O;E+=2){c.setStyle(Z[E+1]);for(var Y=0,B=e.length;Y<B;++Y)c.setTransform(e[Y]),c.drawGeometry(Z[E])}}}return l.getImageData(0,0,u.width,u.height)}function Lt(t,e,i){var r=[];if(i){var n=Math.floor(Math.round(t[0])*wt),o=Math.floor(Math.round(t[1])*wt),s=4*((0,Q.uZ)(n,0,i.width-1)+(0,Q.uZ)(o,0,i.height-1)*i.width),a=i.data[s],h=i.data[s+1],l=i.data[s+2],u=l+256*(h+256*a),c=Math.floor(16777215/e.length);u&&u%c===0&&r.push(e[u/c-1])}return r}var Dt=i(7703),kt=i(7498),Ft=.5,bt={Point:Ut,LineString:Bt,Polygon:Ht,MultiPoint:zt,MultiLineString:Xt,MultiPolygon:jt,GeometryCollection:Yt,Circle:Pt};function At(t,e){return parseInt((0,Z.sq)(t),10)-parseInt((0,Z.sq)(e),10)}function Mt(t,e){var i=Gt(t,e);return i*i}function Gt(t,e){return Ft*t/e}function Pt(t,e,i,r,n){var o=i.getFill(),s=i.getStroke();if(o||s){var a=t.getBuilder(i.getZIndex(),K.CIRCLE);a.setFillStrokeStyle(o,s),a.drawCircle(e,r)}var h=i.getText();if(h&&h.getText()){var l=(n||t).getBuilder(i.getZIndex(),K.TEXT);l.setTextStyle(h),l.drawText(e,r)}}function Nt(t,e,i,r,n,o,s){var a=!1,h=i.getImage();if(h){var l=h.getImageState();l==kt.Z.LOADED||l==kt.Z.ERROR?h.unlistenImageChange(n):(l==kt.Z.IDLE&&h.load(),l=h.getImageState(),h.listenImageChange(n),a=!0)}return Wt(t,e,i,r,o,s),a}function Wt(t,e,i,r,n,o){var s=i.getGeometryFunction()(e);if(s){var a=s.simplifyTransformed(r,n),h=i.getRenderer();if(h)Zt(t,a,i,e);else{var l=bt[a.getType()];l(t,a,i,e,o)}}}function Zt(t,e,i,r){if(e.getType()!=y.Z.GEOMETRY_COLLECTION){var n=t.getBuilder(i.getZIndex(),K.DEFAULT);n.drawCustom(e,r,i.getRenderer(),i.getHitDetectionRenderer())}else for(var o=e.getGeometries(),s=0,a=o.length;s<a;++s)Zt(t,o[s],i,r)}function Yt(t,e,i,r,n){var o,s,a=e.getGeometriesArray();for(o=0,s=a.length;o<s;++o){var h=bt[a[o].getType()];h(t,a[o],i,r,n)}}function Bt(t,e,i,r,n){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),K.LINE_STRING);s.setFillStrokeStyle(null,o),s.drawLineString(e,r)}var a=i.getText();if(a&&a.getText()){var h=(n||t).getBuilder(i.getZIndex(),K.TEXT);h.setTextStyle(a),h.drawText(e,r)}}function Xt(t,e,i,r,n){var o=i.getStroke();if(o){var s=t.getBuilder(i.getZIndex(),K.LINE_STRING);s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,r)}var a=i.getText();if(a&&a.getText()){var h=(n||t).getBuilder(i.getZIndex(),K.TEXT);h.setTextStyle(a),h.drawText(e,r)}}function jt(t,e,i,r,n){var o=i.getFill(),s=i.getStroke();if(s||o){var a=t.getBuilder(i.getZIndex(),K.POLYGON);a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,r)}var h=i.getText();if(h&&h.getText()){var l=(n||t).getBuilder(i.getZIndex(),K.TEXT);l.setTextStyle(h),l.drawText(e,r)}}function Ut(t,e,i,r,n){var o,s=i.getImage(),a=i.getText();if(n&&(t=n,o=s&&a&&a.getText()?{}:void 0),s){if(s.getImageState()!=kt.Z.LOADED)return;var h=t.getBuilder(i.getZIndex(),K.IMAGE);h.setImageStyle(s,o),h.drawPoint(e,r)}if(a&&a.getText()){var l=t.getBuilder(i.getZIndex(),K.TEXT);l.setTextStyle(a,o),l.drawText(e,r)}}function zt(t,e,i,r,n){var o,s=i.getImage(),a=i.getText();if(n&&(t=n,o=s&&a&&a.getText()?{}:void 0),s){if(s.getImageState()!=kt.Z.LOADED)return;var h=t.getBuilder(i.getZIndex(),K.IMAGE);h.setImageStyle(s,o),h.drawMultiPoint(e,r)}if(a&&a.getText()){var l=(n||t).getBuilder(i.getZIndex(),K.TEXT);l.setTextStyle(a,o),l.drawText(e,r)}}function Ht(t,e,i,r,n){var o=i.getFill(),s=i.getStroke();if(o||s){var a=t.getBuilder(i.getZIndex(),K.POLYGON);a.setFillStrokeStyle(o,s),a.drawPolygon(e,r)}var h=i.getText();if(h&&h.getText()){var l=(n||t).getBuilder(i.getZIndex(),K.TEXT);l.setTextStyle(h),l.drawText(e,r)}}var Vt=i(4156),Jt=i(3773),Kt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qt=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=(0,I.lJ)(),i.wrappedRenderedExtent_=(0,I.lJ)(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return Kt(e,t),e.prototype.renderWorlds=function(t,e,i){var r=e.extent,n=e.viewState,o=n.center,s=n.resolution,a=n.projection,h=n.rotation,l=a.getExtent(),u=this.getLayer().getSource(),c=e.pixelRatio,f=e.viewHints,p=!(f[xt.Z.ANIMATING]||f[xt.Z.INTERACTING]),d=this.context,_=Math.round(e.size[0]*c),g=Math.round(e.size[1]*c),y=u.getWrapX()&&a.canWrapX(),v=y?(0,I.dz)(l):null,m=y?Math.ceil((r[2]-l[2])/v)+1:1,x=y?Math.floor((r[0]-l[0])/v):0;do{var S=this.getRenderTransform(o,s,h,c,_,g,x*v);t.execute(d,1,S,h,p,void 0,i)}while(++x<m)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];(0,$.n3)(this.pixelTransform,1/i,1/i),(0,$.nb)(this.inversePixelTransform,this.pixelTransform);var n=(0,$.BB)(this.pixelTransform);this.useContainer(e,n,r.opacity,this.getBackground(t));var o=this.context,s=o.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!h||h.isEmpty()))return null;var l=Math.round(t.size[0]*i),u=Math.round(t.size[1]*i);s.width!=l||s.height!=u?(s.width=l,s.height=u,s.style.transform!==n&&(s.style.transform=n)):this.containerReused||o.clearRect(0,0,l,u),this.preRender(o,t);var c=t.viewState,f=c.projection,p=!1,d=!0;if(r.extent&&this.clipping){var _=(0,Vt.dY)(r.extent,f);d=(0,I.kK)(_,t.extent),p=d&&!(0,I.r4)(_,t.extent),p&&this.clipUnrotated(o,t,_)}d&&this.renderWorlds(a,t),p&&o.restore(),this.postRender(o,t);var g=(0,Dt.Xy)(r.opacity),y=this.container;return g!==y.style.opacity&&(y.style.opacity=g),this.renderedRotation_!==c.rotation&&(this.renderedRotation_=c.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];(0,$.nn)(this.pixelTransform,i);var r=this.renderedCenter_,n=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,a=this.wrappedRenderedExtent_,h=this.getLayer(),l=[],u=i[0]*wt,c=i[1]*wt;l.push(this.getRenderTransform(r,n,o,wt,u,c,0).slice());var f=h.getSource(),p=s.getExtent();if(f.getWrapX()&&s.canWrapX()&&!(0,I.r4)(p,a)){var d=a[0],_=(0,I.dz)(p),g=0,y=void 0;while(d<p[0])--g,y=_*g,l.push(this.getRenderTransform(r,n,o,wt,u,c,y).slice()),d+=_;g=0,d=a[2];while(d>p[2])++g,y=_*g,l.push(this.getRenderTransform(r,n,o,wt,u,c,y).slice()),d-=_}this.hitDetectionImageData_=Rt(i,l,this.renderedFeatures_,h.getStyleFunction(),a,n,o)}e(Lt(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var o=this;if(this.replayGroup_){var s,a=e.viewState.resolution,h=e.viewState.rotation,l=this.getLayer(),u={},c=function(t,e,i){var o=(0,Z.sq)(t),s=u[o];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return u[o]=!0,n.splice(n.lastIndexOf(s),1),r(t,l,e);s.geometry=e,s.distanceSq=i}}else{if(0===i)return u[o]=!0,r(t,l,e);n.push(u[o]={feature:t,layer:l,geometry:e,distanceSq:i,callback:r})}},f=[this.replayGroup_];return this.declutterExecutorGroup&&f.push(this.declutterExecutorGroup),f.some((function(r){return s=r.forEachFeatureAtCoordinate(t,a,h,i,c,r===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),s}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var r=t.viewHints[xt.Z.ANIMATING],n=t.viewHints[xt.Z.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&r||!s&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,h=t.viewState,l=h.projection,u=h.resolution,c=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=At);var _=h.center.slice(),g=(0,I.f3)(a,p*u),y=g.slice(),v=[g.slice()],m=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!(0,I.r4)(m,t.extent)){var x=(0,I.dz)(m),S=Math.max((0,I.dz)(g)/2,x);g[0]=m[0]-S,g[2]=m[2]+S,(0,Jt.Cf)(_,l);var E=(0,I.Cf)(v[0],l);E[0]<m[0]&&E[2]<m[2]?v.push([E[0]+x,E[1],E[2]+x,E[3]]):E[0]>m[0]&&E[2]>m[2]&&v.push([E[0]-x,E[1],E[2]-x,E[3]])}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&(0,I.r4)(this.wrappedRenderedExtent_,g))return(0,T.fS)(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var O,C=new V(Gt(u,c),g,u,c);this.getLayer().getDeclutter()&&(O=new V(Gt(u,c),g,u,c));var w,R=(0,Vt.Cs)();if(R){for(var L=0,D=v.length;L<D;++L){var k=v[L],F=(0,Vt.Fj)(k,l);i.loadFeatures(F,(0,Vt.on)(u,l),R)}w=(0,Vt.WO)(R,l)}else for(L=0,D=v.length;L<D;++L)i.loadFeatures(v[L],u,l);var b=Mt(u,c),A=function(t){var i,r=t.getStyleFunction()||e.getStyleFunction();if(r&&(i=r(t,u)),i){var n=this.renderFeature(t,b,i,C,w,O);this.dirty_=this.dirty_||n}}.bind(this),M=(0,Vt.Fj)(g,l),G=i.getFeaturesInExtent(M);d&&G.sort(d);for(L=0,D=G.length;L<D;++L)A(G[L]);this.renderedFeatures_=G;var P=C.finish(),N=new mt(g,u,c,i.getOverlaps(),P,e.getRenderBuffer());return O&&(this.declutterExecutorGroup=new mt(g,u,c,i.getOverlaps(),O.finish(),e.getRenderBuffer())),this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.wrappedRenderedExtent_=g,this.renderedCenter_=_,this.renderedProjection_=l,this.replayGroup_=N,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,r,n,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var a=0,h=i.length;a<h;++a)s=Nt(r,t,i[a],e,this.boundHandleStyleImageChange_,n,o)||s;else s=Nt(r,t,i,e,this.boundHandleStyleImageChange_,n,o);return s},e}(J.Z),$t=qt,Qt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),te=function(t){function e(e){return t.call(this,e)||this}return Qt(e,t),e.prototype.createRenderer=function(){return new $t(this)},e}(u),ee=te},8462:function(t,e,i){"use strict";i.d(e,{Z:function(){return L}});i(1703),i(1539),i(9714),i(4747),i(7042);var r=i(4206),n=i(165),o=i(6761),s=i(2758),a=i(2313),h=(i(1249),i(4916),i(4765),i(3753),i(2222),i(7614)),l=i(5270),u=i(567),c=i(7037),f=function(){function t(t){this.rbush_=new h(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,u.sq)(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,n=e.length;r<n;r++){var o=t[r],s=e[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[r]=a,this.items_[(0,u.sq)(s)]=a}this.rbush_.load(i)},t.prototype.remove=function(t){var e=(0,u.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[(0,u.sq)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];(0,l.fS)(r,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){var t=this.rbush_.all();return t.map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,r=0,n=t.length;r<n;r++)if(i=e(t[r]),i)return i;return i},t.prototype.isEmpty=function(){return(0,c.xb)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,l.T9)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),p=f,d=i(7115),_=i(7574),g={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"},y=i(4421);i(4156);function v(t,e){return[[-1/0,-1/0,1/0,1/0]]}var m=i(876),x=i(2951),S=i(1262),I=i(8244),E=!1;function T(t,e,i,r,n,o,s){var a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(i,r,n):t,!0),e.getType()==I.Z.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.withCredentials=E,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r=e.getType(),h=void 0;r==I.Z.JSON||r==I.Z.TEXT?h=a.responseText:r==I.Z.XML?(h=a.responseXML,h||(h=(new DOMParser).parseFromString(a.responseText,"application/xml"))):r==I.Z.ARRAY_BUFFER&&(h=a.response),h?o(e.readFeatures(h,{extent:i,featureProjection:n}),e.readProjection(h)):s()}else s()},a.onerror=s,a.send()}function O(t,e){return function(i,r,n,o,s){var a=this;T(t,e,i,r,n,(function(t,e){a.addFeatures(t),void 0!==o&&o(t)}),s||y.Zn)}}var C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),w=function(t){function e(e,i,r){var n=t.call(this,e)||this;return n.feature=i,n.features=r,n}return C(e,t),e}(o.ZP),R=function(t){function e(e){var i=this,n=e||{};i=t.call(this,{attributions:n.attributions,interpolate:!0,projection:void 0,state:_.Z.READY,wrapX:void 0===n.wrapX||n.wrapX})||this,i.on,i.once,i.un,i.loader_=y.Zn,i.format_=n.format,i.overlaps_=void 0===n.overlaps||n.overlaps,i.url_=n.url,void 0!==n.loader?i.loader_=n.loader:void 0!==i.url_&&((0,m.h)(i.format_,7),i.loader_=O(i.url_,i.format_)),i.strategy_=void 0!==n.strategy?n.strategy:v;var o,s,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return i.featuresRtree_=a?new p:null,i.loadedExtentsRtree_=new p,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(n.features)?s=n.features:n.features&&(o=n.features,s=o.getArray()),a||void 0!==o||(o=new r.Z(s)),void 0!==s&&i.addFeaturesInternal(s),void 0!==o&&i.bindFeaturesCollection_(o),i}return C(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=(0,u.sq)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new w(g.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[(0,S.oL)(e,s.Z.CHANGE,this.handleFeatureChange_,this),(0,S.oL)(e,a.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,r=e.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e),i&&((0,m.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],r=[],n=0,o=t.length;n<o;n++){var s=t[n],a=(0,u.sq)(s);this.addToIndex_(a,s)&&i.push(s)}n=0;for(var h=i.length;n<h;n++){s=i[n],a=(0,u.sq)(s);this.setupChangeEvents_(a,s);var l=s.getGeometry();if(l){var c=l.getExtent();e.push(c),r.push(s)}else this.nullGeometryFeatures_[a]=s}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(g.ADDFEATURE)){n=0;for(var f=i.length;n<f;n++)this.dispatchEvent(new w(g.ADDFEATURE,i[n]))}},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(g.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(g.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(n.Z.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(n.Z.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){var i=this.featureChangeKeys_[e];i.forEach(S.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var r=function(t){this.removeFeatureInternal(t)}.bind(this);for(var n in this.featuresRtree_.forEach(r),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new w(g.CLEAR);this.dispatchEvent(o),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){var r=i.getGeometry();return r.intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){var r=i.getGeometry();if(r.intersectsExtent(t)){var n=e(i);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,c.xb)(this.nullGeometryFeatures_)||(0,x.l7)(t,(0,c.KX)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],r=t[1],n=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||y.uX;return this.featuresRtree_.forEachInExtent(a,(function(t){if(h(t)){var e=t.getGeometry(),l=s;if(s=e.closestPointXY(i,r,o,s),s<l){n=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=r-u,a[2]=i+u,a[3]=r+u}}})),n},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=(0,u.sq)(e),r=e.getGeometry();if(r){var n=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(n,e)):this.featuresRtree_&&this.featuresRtree_.update(n,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new w(g.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:(0,u.sq)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,c.xb)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},e.prototype.loadFeatures=function(t,e,i){for(var r=this.loadedExtentsRtree_,n=this.strategy_(t,e,i),o=function(t,o){var a=n[t],h=r.forEachInExtent(a,(function(t){return(0,l.r4)(t.extent,a)}));h||(++s.loadingExtentsCount_,s.dispatchEvent(new w(g.FEATURESLOADSTART)),s.loader_.call(s,a,e,i,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new w(g.FEATURESLOADEND,void 0,t))}.bind(s),function(){--this.loadingExtentsCount_,this.dispatchEvent(new w(g.FEATURESLOADERROR))}.bind(s)),r.insert(a,{extent:a.slice()}))},s=this,a=0,h=n.length;a<h;++a)o(a,h);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if((0,l.fS)(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){if(t){var e=(0,u.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);var i=this.removeFeatureInternal(t);i&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var e=(0,u.sq)(t),i=this.featureChangeKeys_[e];if(i){i.forEach(S.bN),delete this.featureChangeKeys_[e];var r=t.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new w(g.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){(0,m.h)(this.format_,7),this.url_=t,this.setLoader(O(t,this.format_))},e}(d.Z),L=R},1953:function(t,e){"use strict";e["Z"]={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},186:function(t,e,i){"use strict";i.d(e,{E:function(){return r}});var r="1.3.0"},7679:function(t,e,i){"use strict";i.d(e,{n:function(){return r}});i(6977),i(9600),i(4916),i(3123);function r(t,e){for(var i=(""+t).split("."),r=(""+e).split("."),n=0;n<Math.max(i.length,r.length);n++){var o=parseInt(i[n]||"0",10),s=parseInt(r[n]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}},5489:function(t,e,i){"use strict";i.d(e,{Z:function(){return d}});i(1703),i(3290),i(7042);var r=i(7498),n=i(8890),o=i(6314),s=i(2661),a=i(6781),h=i(9569),l=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(t){function e(e){var i=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.size_=null,i.renderOptions_=null,i.render(),i}return l(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement();return[t[0]/2-e[0],t[1]/2+e[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var i=this.renderOptions_,r=(0,a.E4)(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return r.Z.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,n=void 0===this.radius2_?r:this.radius2_;if(r<n){var o=r;r=n,n=o}var s=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/s,h=n*Math.sin(a),l=Math.sqrt(n*n-h*h),u=r-l,c=Math.sqrt(h*h+u*u),f=c/h;if("miter"===t&&f<=i)return f*e;var p=e/2/f,d=e/2*(u/c),_=Math.sqrt((r+p)*(r+p)+d*d),g=_-r;if(void 0===this.radius2_||"bevel"===t)return 2*g;var y=r*Math.sin(a),v=Math.sqrt(r*r-y*y),m=n-v,x=Math.sqrt(y*y+m*m),S=x/y;if(S<=i){var I=S*e/2-n-r;return 2*Math.max(g,I)}return 2*g},e.prototype.createRenderOptions=function(){var t,e=h.rc,i=0,r=null,n=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=h.Tx),t=(0,s.y)(t),o=this.stroke_.getWidth(),void 0===o&&(o=h.yC),r=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=h.rc),i=this.stroke_.getMiterLimit(),void 0===i&&(i=h.V4));var a=this.calculateLineJoinSize_(e,o,i),l=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*l+a);return{strokeStyle:t,strokeWidth:o,size:u,lineDash:r,lineDashOffset:n,lineJoin:e,miterLimit:i}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var r=this.fill_.getColor();null===r&&(r=h.bL),e.fillStyle=(0,s.y)(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),i=0;if("string"===typeof e&&(e=(0,o._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var r=(0,a.E4)(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var n=this.angle_-Math.PI/2,o=2*Math.PI/e,s=0;s<e;s++){var a=n+s*o,h=s%2===0?i:r;t.lineTo(h*Math.cos(a),h*Math.sin(a))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=h.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(n.Z),c=u,f=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),p=function(t){function e(e){var i=e||{};return t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return f(e,t),e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(c),d=p},6386:function(t,e,i){"use strict";i(7042);var r=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}();e["Z"]=r},8263:function(t,e,i){"use strict";i.d(e,{Z:function(){return S}});i(1703),i(5218),i(7042);var r=i(2758),n=i(5316),o={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},s=i(7498),a=i(8890),h=i(6314),l=i(876),u=i(855),c=i(6781),f=i(4692),p=i(1797),d=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_=null,g=function(t){function e(e,i,r,n,o,s){var a=t.call(this)||this;return a.hitDetectionImage_=null,a.image_=e||new Image,null!==n&&(a.image_.crossOrigin=n),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=o,a.size_=r,a.src_=i,a.tainted_,a}return d(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===s.Z.LOADED){_||(_=(0,c.E4)(1,1)),_.drawImage(this.image_,0,0);try{_.getImageData(0,0,1,1),this.tainted_=!1}catch(t){_=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(r.Z.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=s.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=s.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,c.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==s.Z.IDLE){this.imageState_=s.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,p.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===s.Z.LOADED){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=(0,h.XC)(this.color_),i.fillRect(0,0,e.width/t,e.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var r=i.getImageData(0,0,e.width,e.height),n=r.data,o=this.color_[0]/255,a=this.color_[1]/255,l=this.color_[2]/255,u=this.color_[3],c=0,f=n.length;c<f;c+=4)n[c]*=o,n[c+1]*=a,n[c+2]*=l,n[c+3]*=u;i.putImageData(r,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(u.Z);function y(t,e,i,r,n,o){var s=f.c.get(e,r,o);return s||(s=new g(t,e,i,r,n,o),f.c.set(e,r,o,s)),s}var v=i(567),m=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),x=function(t){function e(e){var i=this,r=e||{},a=void 0!==r.opacity?r.opacity:1,u=void 0!==r.rotation?r.rotation:0,c=void 0!==r.scale?r.scale:1,f=void 0!==r.rotateWithView&&r.rotateWithView;i=t.call(this,{opacity:a,rotation:u,scale:c,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:f})||this,i.anchor_=void 0!==r.anchor?r.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:o.TOP_LEFT,i.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:n.Z.FRACTION,i.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:n.Z.FRACTION,i.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var p=void 0!==r.img?r.img:null;i.imgSize_=r.imgSize;var d=r.src;(0,l.h)(!(void 0!==d&&p),4),(0,l.h)(!p||p&&i.imgSize_,5),void 0!==d&&0!==d.length||!p||(d=p.src||(0,v.sq)(p)),(0,l.h)(void 0!==d&&d.length>0,6);var _=void 0!==r.src?s.Z.IDLE:s.Z.LOADED;return i.color_=void 0!==r.color?(0,h._2)(r.color):null,i.iconImage_=y(p,d,void 0!==i.imgSize_?i.imgSize_:null,i.crossOrigin_,_,i.color_),i.offset_=void 0!==r.offset?r.offset:[0,0],i.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:o.TOP_LEFT,i.origin_=null,i.size_=void 0!==r.size?r.size:null,i}return m(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if(this.anchorXUnits_==n.Z.FRACTION||this.anchorYUnits_==n.Z.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==n.Z.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==n.Z.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=o.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=o.TOP_RIGHT&&this.anchorOrigin_!=o.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=o.BOTTOM_LEFT&&this.anchorOrigin_!=o.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=o.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=o.TOP_RIGHT&&this.offsetOrigin_!=o.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=o.BOTTOM_LEFT&&this.offsetOrigin_!=o.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(r.Z.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(r.Z.CHANGE,t)},e}(a.Z),S=x},5316:function(t,e){"use strict";e["Z"]={FRACTION:"fraction",PIXELS:"pixels"}},8890:function(t,e,i){"use strict";i(7042);var r=i(567),n=i(5758),o=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,n.Pq)(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return(0,r.O3)()},t.prototype.getImage=function(t){return(0,r.O3)()},t.prototype.getHitDetectionImage=function(){return(0,r.O3)()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return(0,r.O3)()},t.prototype.getImageSize=function(){return(0,r.O3)()},t.prototype.getOrigin=function(){return(0,r.O3)()},t.prototype.getSize=function(){return(0,r.O3)()},t.prototype.setDisplacement=function(t){this.displacement_=t},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,n.Pq)(t)},t.prototype.listenImageChange=function(t){(0,r.O3)()},t.prototype.load=function(){(0,r.O3)()},t.prototype.unlistenImageChange=function(t){(0,r.O3)()},t}();e["Z"]=o},3407:function(t,e,i){"use strict";i(7042);var r=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();e["Z"]=r},6739:function(t,e,i){"use strict";i.d(e,{J$:function(){return l},yF:function(){return c}});var r=i(9726),n=(i(3290),i(2222),i(5489)),o=i(6386),s=i(3407),a=i(876),h=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===(0,r.Z)(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function l(t){var e;if("function"===typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else{(0,a.h)("function"===typeof t.getZIndex,41);var r=t;i=[r]}e=function(){return i}}return e}var u=null;function c(t,e){if(!u){var i=new o.Z({color:"rgba(255,255,255,0.4)"}),r=new s.Z({color:"#3399CC",width:1.25});u=[new h({image:new n.Z({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return u}function f(t){return t.getGeometry()}e["ZP"]=h},1021:function(t,e){"use strict";e["Z"]={POINT:"point",LINE:"line"}},187:function(t,e,i){"use strict";i.d(e,{B:function(){return r}});i(1539),i(4747),i(7941),i(9600),i(4916),i(5306);function r(t,e){var i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));var r=i.join("&");return t=t.replace(/[?&]$/,""),t=-1===t.indexOf("?")?t+"?":t+"&",t+r}}}]);
//# sourceMappingURL=101-legacy.475133dd.js.map